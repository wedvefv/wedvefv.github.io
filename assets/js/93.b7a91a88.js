(window.webpackJsonp=window.webpackJsonp||[]).push([[93],{491:function(s,t,a){"use strict";a.r(t);var e=a(56),n=Object(e.a)({},(function(){var s=this,t=s.$createElement,a=s._self._c||t;return a("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[a("h1",{attrs:{id:"为什么需要sys-setdefaultencoding-utf-8"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#为什么需要sys-setdefaultencoding-utf-8"}},[s._v("#")]),s._v(' 为什么需要sys.setdefaultencoding("utf-8")')]),s._v(" "),a("ul",[a("li",[s._v("因为python转码是通过unicode作为中间码的。")]),s._v(" "),a("li",[s._v('比如字符串 x = "你们"，本身是str，\n首先我们指定了文件编码uft8，所以x是utf8编码的。')]),s._v(" "),a("li",[s._v("如果要转化gb18030， 默认是x用默认解码方式（ASCII）decode成中间码 unicode ->   encode成gb18030")]),s._v(" "),a("li",[s._v("如果x是abc这些ascii字符本身ascii和utf8方式是一样的,不会报错;")]),s._v(" "),a("li",[s._v("但是x是中文，就不能按ascii方式解码了。。怎么办呢？")]),s._v(" "),a("li",[s._v("1 . 自己指定解码方式，在编码")])]),s._v(" "),a("div",{staticClass:"language-python line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-python"}},[a("code",[s._v("\ty "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" x"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("decode"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"utf-8"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("encode"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"gb18030"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("ul",[a("li",[s._v("2.开头设置默认编解码方式")])]),s._v(" "),a("div",{staticClass:"language-python line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-python"}},[a("code",[s._v("\t"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("import")]),s._v(" sys\n\t"),a("span",{pre:!0,attrs:{class:"token builtin"}},[s._v("reload")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("sys"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n\tsys"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("setdefaultencoding"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"utf-8"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br")])]),a("h2",{attrs:{id:"为什么reload-sys-呢"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#为什么reload-sys-呢"}},[s._v("#")]),s._v(" 为什么reload(sys)呢")]),s._v(" "),a("ul",[a("li",[s._v("因为模块/lib/site.py删除了sys.setdefaultencoding这个函数。")])]),s._v(" "),a("h2",{attrs:{id:"site-py-有什么作用"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#site-py-有什么作用"}},[s._v("#")]),s._v(" site.py 有什么作用")]),s._v(" "),a("ul",[a("li",[s._v("是解释器初始化时自动导入的，这个模块的作用是：自动将第三方模块路径加入到sys.path中。")])]),s._v(" "),a("h2",{attrs:{id:"import的实质"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#import的实质"}},[s._v("#")]),s._v(" import的实质")]),s._v(" "),a("ul",[a("li",[s._v("import sys导入语句，只是导入了一个对sys的引用，因为别人已经提前导入了sys，后面的模块使用sys都是引用这个对象。")]),s._v(" "),a("li",[s._v("而作为初始化模块site.py,导入了许多内建模块包括sys，而且删除了sys.setdefaultencoding这个方法，后面你写的模块，只要导入sys,都是没有这个方法的。")]),s._v(" "),a("li",[s._v("所以需要reload一把，reload也是有前提的，就是之前已经加载过的模块，如果没有加载过的，就无重谈起重新加载了。")])])])}),[],!1,null,null,null);t.default=n.exports}}]);