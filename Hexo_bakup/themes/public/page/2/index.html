
 <!DOCTYPE HTML>
<html lang="zh-Hans">
<head>
<script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
<script>
  (adsbygoogle = window.adsbygoogle || []).push({
    google_ad_client: "ca-pub-9224870466612638",
    enable_page_level_ads: true
  });
</script>

<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-133291163-1"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-133291163-1');
</script>


  <meta charset="UTF-8">
  
    <title>时光</title>
    <meta name="viewport" content="width=device-width, initial-scale=1,user-scalable=no">
    
    <meta name="author" content="wedvefv">
    

    
    <meta name="description" content="愿你出走半生，归来仍是少年！">
<meta property="og:type" content="website">
<meta property="og:title" content="时光">
<meta property="og:url" content="http://wedvefv.github.io/page/2/index.html">
<meta property="og:site_name" content="时光">
<meta property="og:description" content="愿你出走半生，归来仍是少年！">
<meta property="og:locale" content="zh-Hans">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="时光">
<meta name="twitter:description" content="愿你出走半生，归来仍是少年！">

    
    <link rel="alternative" href="/atom.xml" title="时光" type="application/atom+xml">
    
    
    <link rel="icon" href="/img/favicon.ico">
    
    
    <link rel="apple-touch-icon" href="/img/jacman.jpg">
    <link rel="apple-touch-icon-precomposed" href="/img/jacman.jpg">
    
    <link rel="stylesheet" href="/css/style.css">
</head>

  <body>
    <header>
      
<div>
		
			<div id="imglogo">
				<a href="/"><img src="/img/logo.png" alt="时光" title="时光"/></a>
			</div>
			
			<div id="textlogo">
				<h1 class="site-name"><a href="/" title="时光">时光</a></h1>
				<h2 class="blog-motto">记录时光</h2>
			</div>
			<div class="navbar"><a class="navbutton navmobile" href="#" title="Menu">
			</a></div>
			<nav class="animated">
				<ul>
					<ul>
					 
						<li><a href="/">Home</a></li>
					
						<li><a href="/archives">Archives</a></li>
					
						<li><a href="/about">About</a></li>
					
					<li>
 					
					<form class="search" action="//google.com/search" method="get" accept-charset="utf-8">
						<label>Search</label>
						<input type="search" id="search" name="q" autocomplete="off" maxlength="20" placeholder="Search" />
						<input type="hidden" name="q" value="site:wedvefv.github.io">
					</form>
					
					</li>
				</ul>
			</nav>			
</div>
    </header>
    <div id="container">
      <div id="main">

   
    
    <article class="post-expand post" itemprop="articleBody"> 
        <header class="article-info clearfix">
  <h1 itemprop="name">
    
      <a href="/2019/02/12/linux/linux虚拟机配置静态ip/" title="linux虚拟机配置静态ip" itemprop="url">linux虚拟机配置静态ip</a>
  </h1>
  <p class="article-author">By
       
		<a href="/about" title="wedvefv" target="_blank" itemprop="author">wedvefv</a>
		
  <p class="article-time">
    <time datetime="2019-02-12T06:00:00.000Z" itemprop="datePublished"> Published 2019-02-12</time>
    
  </p>
</header>
    <div class="article-content">
        
        <h2 id="1-mac上的虚拟机使用（自动模式）就是桥接模式。"><a href="#1-mac上的虚拟机使用（自动模式）就是桥接模式。" class="headerlink" title="1. mac上的虚拟机使用（自动模式）就是桥接模式。"></a>1. mac上的虚拟机使用（自动模式）就是桥接模式。</h2><p><img src="/2019/02/12/linux/linux虚拟机配置静态ip/images/vmnet.png" alt=""></p>
<h2 id="2-查看自己的网卡名"><a href="#2-查看自己的网卡名" class="headerlink" title="2. 查看自己的网卡名"></a>2. 查看自己的网卡名</h2><ul>
<li><p>ifconfig 命令</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost ~]# ifconfig</span><br><span class="line">ens33: flags=4163&lt;UP,BROADCAST,RUNNING,MULTICAST&gt;  mtu 1500</span><br><span class="line">        inet 192.168.2.132  netmask 255.255.255.0  broadcast 192.168.2.255</span><br><span class="line">        inet6 fe80::315:b3ba:674b:3fdc  prefixlen 64  scopeid 0x20&lt;link&gt;</span><br><span class="line">        ether 00:0c:29:14:d2:38  txqueuelen 1000  (Ethernet)</span><br><span class="line">        RX packets 56630  bytes 20928797 (19.9 MiB)</span><br><span class="line">        RX errors 0  dropped 0  overruns 0  frame 0</span><br><span class="line">        TX packets 24078  bytes 2636531 (2.5 MiB)</span><br><span class="line">        TX errors 0  dropped 0 overruns 0  carrier 0  collisions 0</span><br><span class="line"></span><br><span class="line">lo: flags=73&lt;UP,LOOPBACK,RUNNING&gt;  mtu 65536</span><br><span class="line">        inet 127.0.0.1  netmask 255.0.0.0</span><br><span class="line">        inet6 ::1  prefixlen 128  scopeid 0x10&lt;host&gt;</span><br><span class="line">        loop  txqueuelen 1  (Local Loopback)</span><br><span class="line">        RX packets 2517  bytes 223561 (218.3 KiB)</span><br><span class="line">        RX errors 0  dropped 0  overruns 0  frame 0</span><br><span class="line">        TX packets 2517  bytes 223561 (218.3 KiB)</span><br><span class="line">        TX errors 0  dropped 0 overruns 0  carrier 0  collisions 0</span><br></pre></td></tr></table></figure>
</li>
<li><p>我的网卡就是ens33,下面lo是本地回环地址，ip是127.0.0.1</p>
</li>
</ul>
<h2 id="修改网卡配置文件"><a href="#修改网卡配置文件" class="headerlink" title="修改网卡配置文件"></a>修改网卡配置文件</h2><p>vim /etc/sysconfig/network-scripts/ifcfg-ens33</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">  1 TYPE=Ethernet</span><br><span class="line">  2 PROXY_METHOD=none</span><br><span class="line">  3 BROWSER_ONLY=no</span><br><span class="line">  4 #BOOTPROTO=dhcp</span><br><span class="line">  5 DEFROUTE=yes</span><br><span class="line">  6 IPV4_FAILURE_FATAL=no</span><br><span class="line">  7 IPV6INIT=yes</span><br><span class="line">  8 IPV6_AUTOCONF=yes</span><br><span class="line">  9 IPV6_DEFROUTE=yes</span><br><span class="line"> 10 IPV6_FAILURE_FATAL=no</span><br><span class="line"> 11 IPV6_ADDR_GEN_MODE=stable-privacy</span><br><span class="line"> 12 NAME=ens33</span><br><span class="line"> 13 UUID=5e4d74e0-4fd2-48b9-8856-a206acc5b6ea</span><br><span class="line"> 14 DEVICE=ens33</span><br><span class="line"> 15 #ONBOOT=yes</span><br><span class="line"> 16 </span><br><span class="line"> 17 # 下面是新增的部分，上面的BOOTPROTO和ONBOOT注释掉。</span><br><span class="line"> 18 # static config</span><br><span class="line"> 19 NM_CONTROLLED=no # use config file not network manager.</span><br><span class="line"> 20 BOOTPROTO=static</span><br><span class="line"> 21 ONBOOT=yes</span><br><span class="line"> 22 IPADDR=192.168.2.132</span><br><span class="line"> 23 NETMASK=255.255.255.0</span><br><span class="line"> 24 GATEWAY=192.168.2.1</span><br><span class="line"> 25 </span><br><span class="line"></span><br><span class="line">``` </span><br><span class="line"></span><br><span class="line"><span class="meta">#</span># 设置DNS</span><br><span class="line"></span><br><span class="line">vim /etc/sysconfig/network</span><br><span class="line">```shell</span><br><span class="line"><span class="meta">	#</span> 这个文件主要是设置HOSTNAME,设置是否启动网络，需要reboot，如果修改网关，重启service就行了</span><br><span class="line">	写入：</span><br><span class="line">	DNS1=8.8.8.8</span><br><span class="line">	DNS2=114.114.114.114</span><br><span class="line">	GATEWAY=192.168.2.1 # 一般是路由器的ip，我家两个路由器，一个是192.168.1.1，一个是192.168.2.1。</span><br></pre></td></tr></table></figure>
<h2 id="重启服务"><a href="#重启服务" class="headerlink" title="重启服务"></a>重启服务</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">service network restart</span><br></pre></td></tr></table></figure>

        
        
        <p class="article-more-link">
          
       </p>
    </div>
    <footer class="article-footer clearfix">
<div class="article-catetags">

<div class="article-categories">
  <span></span>
  <a class="article-category-link" href="/categories/linux/">linux</a>
</div>


</div>




<div class="comments-count">
	
</div>

</footer>


    </article>






   
    
    <article class="post-expand post" itemprop="articleBody"> 
        <header class="article-info clearfix">
  <h1 itemprop="name">
    
      <a href="/2019/01/28/language/python/3_模板的bootstrap扩展/" title="flask 第3章(bootstrap扩展模板)" itemprop="url">flask 第3章(bootstrap扩展模板)</a>
  </h1>
  <p class="article-author">By
       
		<a href="/about" title="wedvefv" target="_blank" itemprop="author">wedvefv</a>
		
  <p class="article-time">
    <time datetime="2019-01-28T14:22:00.000Z" itemprop="datePublished"> Published 2019-01-28</time>
    
  </p>
</header>
    <div class="article-content">
        
        <h1 id="模板的bootstrap扩展"><a href="#模板的bootstrap扩展" class="headerlink" title="模板的bootstrap扩展"></a>模板的bootstrap扩展</h1><ul>
<li>安装扩展包</li>
<li><p>pip install flask-bootstrap</p>
</li>
<li><p>如法炮制，从flask.ext中导入Bootstrap 包含app对象生成新的对象实例，即可使用bootstrap的特性。</p>
</li>
</ul>
<p>如果使用bootstrap那么需要先用bootstrap包含app，在用manager包含app。</p>
<ul>
<li>自定一个base.html(继承自bootstrap的base.html)</li>
</ul>
<figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">&#123;% extends <span class="string">"bootstrap/base.html"</span> %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% block title %&#125;  &#123;% endblock %&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#123;% block navbar %&#125;</span><br><span class="line">    &lt;div class="navbar navbar-inverse" role="navigation"&gt;</span><br><span class="line">        &lt;div class="container"&gt;</span><br><span class="line">            &lt;div class="navbar-header"&gt;</span><br><span class="line">                &lt;button type="button" class="navbar-toggle"</span><br><span class="line">                    data-toogle=<span class="string">"collapse"</span> data-target=<span class="string">".narvar-collapse"</span>&gt;</span><br><span class="line">                    &lt;span class="sr-only"&gt; Toggle navigation    &lt;/span&gt;</span><br><span class="line">                    &lt;span class="icon-bar"&gt; &lt;/span&gt;</span><br><span class="line">                    &lt;span class="icon-bar"&gt; &lt;/span&gt;</span><br><span class="line">                    &lt;span class="icon-bar"&gt; &lt;/span&gt;</span><br><span class="line">                    &lt;span class="icon-bar"&gt; &lt;/span&gt;</span><br><span class="line">                &lt;/button&gt;</span><br><span class="line">                &lt;a class="navbar-brand" href="/"&gt;Home/a&gt;</span><br><span class="line">            &lt;/div&gt;</span><br><span class="line"></span><br><span class="line">            &lt;div class="navbar-collapse collapse"&gt;</span><br><span class="line">                &lt;ul class="nav navbar-nav"&gt;</span><br><span class="line">                    &lt;li&gt; &lt;a hre="/"&gt; Home &lt;/a&gt;&lt;/li&gt;</span><br><span class="line">                &lt;/ul&gt;</span><br><span class="line">            &lt;/div&gt;</span><br><span class="line">        &lt;/div&gt;</span><br><span class="line"></span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">&#123;% endblock %&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&lt;% block comment %&gt;</span><br><span class="line">    &lt;div class="container"&gt;</span><br><span class="line">        &#123;% block page_comment %&#125;     &#123;% endblock %&#125;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">&lt;% endblock %&gt;</span><br></pre></td></tr></table></figure>
<h2 id="自定义基类模板"><a href="#自定义基类模板" class="headerlink" title="自定义基类模板"></a>自定义基类模板</h2><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 404.html</span></span><br><span class="line"></span><br><span class="line">&#123;% extends <span class="string">"base.html"</span> %&#125;</span><br><span class="line">&#123;% block title %&#125; flask-pagenot found   &#123;% endblock %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% block page_comment %&#125;</span><br><span class="line">&lt;div class="page-header"&gt;</span><br><span class="line">    &lt;h1&gt; Not Found. &lt;/h1&gt;</span><br><span class="line">&lt;/div&gt;</span><br><span class="line"></span><br><span class="line">&#123;%endblock%&#125;</span><br></pre></td></tr></table></figure>
<h2 id="整个代码文件"><a href="#整个代码文件" class="headerlink" title="整个代码文件"></a>整个代码文件</h2><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> flask <span class="keyword">import</span> Flask, render_template</span><br><span class="line"><span class="keyword">from</span> flask_script <span class="keyword">import</span> Manager</span><br><span class="line"><span class="keyword">from</span> flask_bootstrap <span class="keyword">import</span> Bootstrap</span><br><span class="line"></span><br><span class="line">app = Flask(__name__)</span><br><span class="line"></span><br><span class="line">bootstrap = Bootstrap(app)</span><br><span class="line">manager = Manager(app)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="meta">@app.route('/')</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">index</span><span class="params">()</span>:</span></span><br><span class="line">    <span class="keyword">return</span> render_template(<span class="string">"index.html"</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="meta">@app.route('/user/&lt;name&gt;')</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">user</span><span class="params">(name)</span>:</span></span><br><span class="line">    <span class="keyword">return</span> render_template(<span class="string">"user.html"</span>,name=name)</span><br><span class="line"></span><br><span class="line"><span class="meta">@app.errorhandler(404)</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">page_not_found</span><span class="params">(e)</span>:</span></span><br><span class="line">    <span class="keyword">return</span>  render_template(<span class="string">"404.html"</span>), <span class="number">404</span> </span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">'__main__'</span>:</span><br><span class="line">    manager.run()</span><br></pre></td></tr></table></figure>
<ul>
<li>运行命令 ： python hello.py  runserver –host 0.0.0.0 –d</li>
</ul>
<h2 id="链接"><a href="#链接" class="headerlink" title="链接"></a>链接</h2><p>a标签常用的href 可以使用url_for 函数生成<br>url_for(“index”) –&gt; /</p>
<p>url_for(“index”,_external=True) –&gt; 绝对路径</p>
<p>url_for(“index”, page=2 ) 返回？/page=2</p>
<p>静态文件生成链接<br>url_for(‘static’, filename=’css/styles.css’, _external=True)<br>返回 <a href="http://localhost:5000/statics/css/style.css" target="_blank" rel="noopener">http://localhost:5000/statics/css/style.css</a></p>
<h2 id="flask-moment组件本地化时间和日期"><a href="#flask-moment组件本地化时间和日期" class="headerlink" title="flask-moment组件本地化时间和日期"></a>flask-moment组件本地化时间和日期</h2><ul>
<li>pip install flask-moment</li>
</ul>
<figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">&#123;% extends <span class="string">"base.html"</span> %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% block page_content %&#125;</span><br><span class="line">&lt;h1&gt; hello world!&lt;/h1&gt;</span><br><span class="line">&lt;p&gt; local date and time is &#123;&#123; moment(current_time).format('LLL')&#125;&#125;. &lt;/p&gt;</span><br><span class="line">&lt;p&gt; that was &#123;&#123; moment(current_time).fromNow(refresh=True) &#125;&#125;. &lt;/p&gt;</span><br><span class="line"></span><br><span class="line">&#123;% endblock %&#125;</span><br></pre></td></tr></table></figure>

        
        
        <p class="article-more-link">
          
       </p>
    </div>
    <footer class="article-footer clearfix">
<div class="article-catetags">

<div class="article-categories">
  <span></span>
  <a class="article-category-link" href="/categories/flask/">flask</a>
</div>


</div>




<div class="comments-count">
	
</div>

</footer>


    </article>






   
    
    <article class="post-expand post" itemprop="articleBody"> 
        <header class="article-info clearfix">
  <h1 itemprop="name">
    
      <a href="/2019/01/28/language/python/5_数据库1/" title="flask 第5章(数据库操作)" itemprop="url">flask 第5章(数据库操作)</a>
  </h1>
  <p class="article-author">By
       
		<a href="/about" title="wedvefv" target="_blank" itemprop="author">wedvefv</a>
		
  <p class="article-time">
    <time datetime="2019-01-28T14:22:00.000Z" itemprop="datePublished"> Published 2019-01-28</time>
    
  </p>
</header>
    <div class="article-content">
        
        <h1 id="数据库操作"><a href="#数据库操作" class="headerlink" title="数据库操作"></a>数据库操作</h1><h2 id="1-安装需要的包"><a href="#1-安装需要的包" class="headerlink" title="1. 安装需要的包"></a>1. 安装需要的包</h2><ul>
<li>pip install flask-sqlalchemy</li>
</ul>
<p>hello.py</p>
<figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#coding=utf=8</span></span><br><span class="line"><span class="keyword">import</span> pymysql</span><br><span class="line">pymysql.install_as_MySQLdb()</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> MySQLdb <span class="comment"># MySQLdb 只支持python2 ,我这limitlinux转不上，只能装pymysql代替，但是需要上面2行代码</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 引入核心模块和模板加载模块</span></span><br><span class="line"><span class="keyword">from</span> flask <span class="keyword">import</span> Flask, render_template,session,redirect,url_for,flash</span><br><span class="line"><span class="comment"># 引入bootstrap前端框架</span></span><br><span class="line"><span class="keyword">from</span> flask_bootstrap <span class="keyword">import</span> Bootstrap</span><br><span class="line"><span class="comment"># 引入时间模块,实现了momment.js</span></span><br><span class="line"><span class="keyword">from</span> flask_moment <span class="keyword">import</span> Moment</span><br><span class="line"><span class="comment"># 引入manage模块，服务器启动参数控制</span></span><br><span class="line"><span class="keyword">from</span> flask_script <span class="keyword">import</span> Manager</span><br><span class="line"><span class="comment"># 引入表单模块</span></span><br><span class="line"><span class="keyword">from</span> flask_wtf <span class="keyword">import</span> FlaskForm</span><br><span class="line"><span class="comment"># 引入表单字段类</span></span><br><span class="line"><span class="keyword">from</span> wtforms <span class="keyword">import</span> StringField,SubmitField</span><br><span class="line"><span class="comment"># 引入表单验证函数</span></span><br><span class="line"><span class="keyword">from</span> wtforms.validators <span class="keyword">import</span> Required</span><br><span class="line"><span class="comment">#导入数据库包</span></span><br><span class="line"><span class="keyword">from</span> flask_sqlalchemy <span class="keyword">import</span> SQLAlchemy</span><br><span class="line"></span><br><span class="line"><span class="comment"># 每个web表单都有一个继承自FlaskForm的类表示,所以先定义一个类</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">NameForm</span><span class="params">(FlaskForm)</span>:</span></span><br><span class="line">    name = StringField(<span class="string">"what is your name ?"</span>,validators=[Required()]) <span class="comment"># 字段对象可附加多个验证函数，所以是列表, Required确保非空</span></span><br><span class="line">    submit = SubmitField(<span class="string">"Submit1"</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">app = Flask(__name__)</span><br><span class="line"><span class="comment"># 生成加密令牌的密钥,再用令牌验证请求的表单数据真伪</span></span><br><span class="line">app.config[<span class="string">'SECRET_KEY'</span>] = <span class="string">'this random string！'</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 数据库配置</span></span><br><span class="line">app.config[<span class="string">"SQLALCHEMY_DATABASE_URI"</span>] = <span class="string">"mysql://appwriter:appwr@zxcv@192.168.43.186/flask?charset=utf8"</span></span><br><span class="line">app.config[<span class="string">"SQLALCHEMY_COMMIT_ON_TEARDOWN"</span>] = <span class="keyword">True</span> <span class="comment"># 请求结束自动提交数据库变动</span></span><br><span class="line">app.config[<span class="string">"SQLALCHEMY_TRACK_MODIFICATIONS"</span>] = <span class="keyword">True</span> <span class="comment"># 这行不能缺</span></span><br><span class="line"><span class="comment">#SQLALCHEMY_COMMIT_TEARDOWN = True</span></span><br><span class="line"></span><br><span class="line">db = SQLAlchemy(app) <span class="comment"># 数据库实例 模型继承于db.model, 模型在python就是一个类，数据库中是一个表，类属性就是表字段</span></span><br><span class="line"></span><br><span class="line">bootstrap = Bootstrap(app)</span><br><span class="line">moment = Moment(app)</span><br><span class="line">manager = Manager(app)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># 定义模型</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Role</span><span class="params">(db.Model)</span>:</span></span><br><span class="line">    __tablename__ = <span class="string">'roles'</span></span><br><span class="line">    id = db.Column(db.Integer, primary_key=<span class="keyword">True</span>)</span><br><span class="line">    name = db.Column(db.String(<span class="number">64</span>),unique=<span class="keyword">True</span>)</span><br><span class="line">    users = db.relationship(<span class="string">"User"</span>, backref=<span class="string">'role'</span>)</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__repr__</span><span class="params">(self)</span>:</span></span><br><span class="line">        <span class="keyword">return</span> <span class="string">'&lt;Role %r&gt; '</span> % self.name</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">User</span><span class="params">(db.Model)</span>:</span></span><br><span class="line">    __tablename__ = <span class="string">"users"</span></span><br><span class="line">    id = db.Column(db.Integer,primary_key=<span class="keyword">True</span>)</span><br><span class="line">    username = db.Column(db.String(<span class="number">64</span>),unique=<span class="keyword">True</span>)</span><br><span class="line">    role_id = db.Column(db.Integer, db.ForeignKey(<span class="string">'roles.id'</span>))</span><br><span class="line"></span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__repr__</span><span class="params">(self)</span>:</span></span><br><span class="line">        <span class="keyword">return</span> <span class="string">'&lt;User %r&gt; '</span> % self.username</span><br><span class="line"></span><br><span class="line"><span class="meta">@app.errorhandler(404)</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">page_not_found</span><span class="params">(e)</span>:</span></span><br><span class="line">    <span class="keyword">return</span> render_template(<span class="string">'404.html'</span>), <span class="number">404</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="meta">@app.errorhandler(500)</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">internal_server_error</span><span class="params">(e)</span>:</span></span><br><span class="line">    <span class="keyword">return</span> render_template(<span class="string">'500.html'</span>), <span class="number">500</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="meta">@app.route('/', methods=['GET', 'POST'])</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">index</span><span class="params">()</span>:</span></span><br><span class="line">    form = NameForm()</span><br><span class="line">    <span class="keyword">if</span> form.validate_on_submit():</span><br><span class="line">        old_name = session.get(<span class="string">"name"</span>)</span><br><span class="line">        <span class="keyword">if</span> old_name <span class="keyword">is</span> <span class="keyword">not</span> <span class="keyword">None</span> <span class="keyword">and</span> old_name != form.name.data:</span><br><span class="line">            flash(<span class="string">"your are changing your name ."</span>)</span><br><span class="line">        session[<span class="string">"name"</span>] = form.name.data</span><br><span class="line">        <span class="keyword">return</span> redirect(url_for(<span class="string">"index"</span>)) <span class="comment"># 一般endpoint就是视图函数名</span></span><br><span class="line">    <span class="keyword">return</span> render_template(<span class="string">"index.html"</span>, form=form, name = session.get(<span class="string">'name'</span>))</span><br><span class="line">    <span class="comment">#return render_template("index.html", form=form, name = None)</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">"__main__"</span>:</span><br><span class="line">    manager.run()</span><br></pre></td></tr></table></figure>
<h2 id="2-SQLAlchemy-常用的列类型"><a href="#2-SQLAlchemy-常用的列类型" class="headerlink" title="2. SQLAlchemy 常用的列类型"></a>2. SQLAlchemy 常用的列类型</h2><table>
<thead>
<tr>
<th>类型名</th>
<th>python类型</th>
<th>说明</th>
</tr>
</thead>
<tbody>
<tr>
<td>Integer</td>
<td>int</td>
<td>普通整数一般32位</td>
</tr>
<tr>
<td>Smallinteger</td>
<td>int</td>
<td>一般16位的整数</td>
</tr>
<tr>
<td>BigInteger</td>
<td>int</td>
<td>不限制精度的整数</td>
</tr>
<tr>
<td>Float</td>
<td>float</td>
<td>浮点数</td>
</tr>
<tr>
<td>Numeric</td>
<td>decimal.Decimal</td>
<td>定点数，小数</td>
</tr>
<tr>
<td>String</td>
<td>str</td>
<td>字符串</td>
</tr>
<tr>
<td>Text</td>
<td>str</td>
<td>较长的字符串，做了优化，或不限制长度</td>
</tr>
<tr>
<td>Unicode</td>
<td>unicode</td>
<td>变长unicode字符串，对不限长度的字符串做了优化</td>
</tr>
<tr>
<td>Boolean</td>
<td>bool</td>
<td>布尔值</td>
</tr>
<tr>
<td>Date</td>
<td>datetime.date</td>
<td>日期</td>
</tr>
<tr>
<td>Time</td>
<td>datetime.time</td>
<td>时间</td>
</tr>
<tr>
<td>DateTime</td>
<td>datetime.datetime</td>
<td>日期和时间</td>
</tr>
<tr>
<td>Interval</td>
<td>datetime.timedelta</td>
<td>时间间隔</td>
</tr>
<tr>
<td>Enum</td>
<td>str</td>
<td>一组字符串</td>
</tr>
<tr>
<td>PickleType</td>
<td>任何python对象</td>
<td>石洞使用Pickle序列化</td>
</tr>
<tr>
<td>LargeBinary</td>
<td>str</td>
<td>二进制文件</td>
</tr>
</tbody>
</table>
<h2 id="3-SQLAlchemy常用的列选项"><a href="#3-SQLAlchemy常用的列选项" class="headerlink" title="3. SQLAlchemy常用的列选项"></a>3. SQLAlchemy常用的列选项</h2><table>
<thead>
<tr>
<th>选项名</th>
<th>说明</th>
</tr>
</thead>
<tbody>
<tr>
<td>primary_key</td>
<td>表主键</td>
</tr>
<tr>
<td>unique</td>
<td>设为true，表示这列不允许重复</td>
</tr>
<tr>
<td>index</td>
<td>设为True,表示这列建立索引</td>
</tr>
<tr>
<td>nullalbe</td>
<td>设为True,表示这列允许位空值NULL，fasle表示不允许为空</td>
</tr>
<tr>
<td>default</td>
<td>为这列默认值</td>
</tr>
</tbody>
</table>
<p>最复杂的就是多对多的关系，需要第三张表，使用db.relationship()设置。</p>
<h2 id="4-数据库操作"><a href="#4-数据库操作" class="headerlink" title="4. 数据库操作"></a>4. 数据库操作</h2><ul>
<li>python shell中操作</li>
</ul>
<figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">python hello.py shell</span><br><span class="line"><span class="keyword">from</span> hello <span class="keyword">import</span> db</span><br><span class="line">db.create_all()</span><br></pre></td></tr></table></figure>

        
        
        <p class="article-more-link">
          
       </p>
    </div>
    <footer class="article-footer clearfix">
<div class="article-catetags">

<div class="article-categories">
  <span></span>
  <a class="article-category-link" href="/categories/flask/">flask</a>
</div>


</div>




<div class="comments-count">
	
</div>

</footer>


    </article>






   
    
    <article class="post-expand post" itemprop="articleBody"> 
        <header class="article-info clearfix">
  <h1 itemprop="name">
    
      <a href="/2019/01/28/language/python/4_web表单/" title="flask 第4章(表单)" itemprop="url">flask 第4章(表单)</a>
  </h1>
  <p class="article-author">By
       
		<a href="/about" title="wedvefv" target="_blank" itemprop="author">wedvefv</a>
		
  <p class="article-time">
    <time datetime="2019-01-28T14:22:00.000Z" itemprop="datePublished"> Published 2019-01-28</time>
    
  </p>
</header>
    <div class="article-content">
        
        <h1 id="表单的处理"><a href="#表单的处理" class="headerlink" title="表单的处理"></a>表单的处理</h1><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pip install flask-wtf</span><br></pre></td></tr></table></figure>
<h1 id="1-跨站请求伪造保护XSRF和XSS"><a href="#1-跨站请求伪造保护XSRF和XSS" class="headerlink" title="1. 跨站请求伪造保护XSRF和XSS"></a>1. 跨站请求伪造保护XSRF和XSS</h1><ul>
<li><p>XSRF 跨站请求伪造<br>** 利用用户已经登陆了的网站上执行非法操作，利用了网站对已登录用户的信任。</p>
</li>
<li><p>XSS 跨站脚本攻击<br>** 利用用户对制定网站的信任，执行一些非法操作。</p>
</li>
<li><p>为了防止XSRF攻击，所以有了 SECRET_KEY配置项。</p>
</li>
</ul>
<h1 id="2-主文件hello-py-代码"><a href="#2-主文件hello-py-代码" class="headerlink" title="2. 主文件hello.py 代码"></a>2. 主文件hello.py 代码</h1><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#coding=utf=8</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 引入核心模块和模板加载模块</span></span><br><span class="line"><span class="keyword">from</span> flask <span class="keyword">import</span> Flask, render_template</span><br><span class="line"><span class="comment"># 引入bootstrap前端框架</span></span><br><span class="line"><span class="keyword">from</span> flask_bootstrap <span class="keyword">import</span> Bootstrap</span><br><span class="line"><span class="comment"># 引入时间模块,实现了momment.js</span></span><br><span class="line"><span class="keyword">from</span> flask_moment <span class="keyword">import</span> Moment</span><br><span class="line"><span class="comment"># 引入manage模块，服务器启动参数控制</span></span><br><span class="line"><span class="keyword">from</span> flask_script <span class="keyword">import</span> Manager</span><br><span class="line"><span class="comment"># 引入表单模块</span></span><br><span class="line"><span class="keyword">from</span> flask_wtf <span class="keyword">import</span> FlaskForm</span><br><span class="line"><span class="comment"># 引入表单字段类</span></span><br><span class="line"><span class="keyword">from</span> wtforms <span class="keyword">import</span> StringField,SubmitField</span><br><span class="line"><span class="comment"># 引入表单验证函数</span></span><br><span class="line"><span class="keyword">from</span> wtforms.validators <span class="keyword">import</span> Required</span><br><span class="line"></span><br><span class="line"><span class="comment"># 每个web表单都有一个继承自FlaskForm的类表示,所以先定义一个类</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">NameForm</span><span class="params">(FlaskForm)</span>:</span></span><br><span class="line">    name = StringField(<span class="string">"what is your name ?"</span>,validators=[Required()]) <span class="comment"># 字段对象可附加多个验证函数，所以是列表, Required确保非空</span></span><br><span class="line">    submit = SubmitField(<span class="string">"Submit1"</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">app = Flask(__name__)</span><br><span class="line"><span class="comment"># 生成加密令牌的密钥,再用令牌验证请求的表单数据真伪,</span></span><br><span class="line">app.config[<span class="string">'SECRET_KEY'</span>] = <span class="string">'this random string！'</span></span><br><span class="line"></span><br><span class="line">bootstrap = Bootstrap(app)</span><br><span class="line">moment = Moment(app)</span><br><span class="line">manager = Manager(app)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="meta">@app.errorhandler(404)</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">page_not_found</span><span class="params">(e)</span>:</span></span><br><span class="line">    <span class="keyword">return</span> render_template(<span class="string">'404.html'</span>), <span class="number">404</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="meta">@app.errorhandler(500)</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">internal_server_error</span><span class="params">(e)</span>:</span></span><br><span class="line">    <span class="keyword">return</span> render_template(<span class="string">'500.html'</span>), <span class="number">500</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="meta">@app.route('/', methods=['GET', 'POST']) #如果不附加post方法，会get提交表单，信息就暴漏在浏览器地址栏中了。</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">index</span><span class="params">()</span>:</span></span><br><span class="line">    name = <span class="keyword">None</span></span><br><span class="line">    form = NameForm()</span><br><span class="line">    <span class="keyword">if</span> form.validate_on_submit():</span><br><span class="line">        name = form.name.data</span><br><span class="line">        form.name.data = <span class="string">''</span></span><br><span class="line">    <span class="keyword">return</span> render_template(<span class="string">"index.html"</span>,form = form, name = name)</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">"__main__"</span>:</span><br><span class="line">    manager.run()</span><br></pre></td></tr></table></figure>
<ul>
<li>第一次请求页面是get方式，validate_on_submit()函数返回false , 表单对象和name=None传入模板，用户看到就是表单的样子</li>
<li>用户输入name提交时，是post请求，validate_on_submit()返回true，表单对象传入name会被清空，name参数也传入，显示在页面。hello， nama！</li>
</ul>
<h1 id="3-模板文件index-html"><a href="#3-模板文件index-html" class="headerlink" title="3.模板文件index.html"></a>3.模板文件index.html</h1><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">&#123;% extends "base.html" %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% import "bootstrap/wtf.html" as wtf %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% block title %&#125;Flasky&#123;% endblock %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% block page_content %&#125;</span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"page-header"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">h1</span>&gt;</span>Hello, &#123;% if name %&#125;&#123;&#123; name &#125;&#125;&#123;% else %&#125;Stranger&#123;% endif %&#125;!<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">&#123;&#123; wtf.quick_form(form) &#125;&#125;</span><br><span class="line">&#123;% endblock %&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&#123;% <span class="keyword">import</span> <span class="string">"bootstrap\/wtf.html"</span> <span class="keyword">as</span> wtf %&#125; 引入wtf模板，</span><br><span class="line">&#123;&#123; wtf.quick_form(form) &#125;&#125;填充表单数据</span><br></pre></td></tr></table></figure>
<h1 id="4-wtdforms-支持的表单字段类型"><a href="#4-wtdforms-支持的表单字段类型" class="headerlink" title="4. wtdforms 支持的表单字段类型"></a>4. wtdforms 支持的表单字段类型</h1><table>
<thead>
<tr>
<th>字段类型</th>
<th>说明</th>
</tr>
</thead>
<tbody>
<tr>
<td>StringField</td>
<td>文本字段</td>
</tr>
<tr>
<td>TextAreaField</td>
<td>多行文本</td>
</tr>
<tr>
<td>PasswordField</td>
<td>密码文本字段</td>
</tr>
<tr>
<td>HiddenField</td>
<td>隐藏文本字段</td>
</tr>
<tr>
<td>DateField</td>
<td>文本字段，值为datetime.date格式</td>
</tr>
<tr>
<td>IntrgerField</td>
<td>文本字段，为整数</td>
</tr>
<tr>
<td>DecimalField</td>
<td>文本字段，值为小数</td>
</tr>
<tr>
<td>FloatField</td>
<td>文本字段，值为浮点数</td>
</tr>
<tr>
<td>BooleanField</td>
<td>复选框，值为flase和true</td>
</tr>
<tr>
<td>RadioField</td>
<td>一组单选框</td>
</tr>
<tr>
<td>SelectField</td>
<td>下拉列表</td>
</tr>
<tr>
<td>SelectMultipleField</td>
<td>下拉列表可选多个值</td>
</tr>
<tr>
<td>FileField</td>
<td>文件上传字段</td>
</tr>
<tr>
<td>SubmitField</td>
<td>表单提交按钮</td>
</tr>
<tr>
<td>FormField</td>
<td>把表单作为一个字段嵌入另一个表单</td>
</tr>
<tr>
<td>FieldList</td>
<td>一组指定类型的字段</td>
</tr>
</tbody>
</table>
<h1 id="5-wtfforms验证函数"><a href="#5-wtfforms验证函数" class="headerlink" title="5. wtfforms验证函数"></a>5. wtfforms验证函数</h1><table>
<thead>
<tr>
<th>验证函数</th>
<th>说明</th>
</tr>
</thead>
<tbody>
<tr>
<td>Email</td>
<td>验证mail地址</td>
</tr>
<tr>
<td>EqualTo</td>
<td>比较2个字段的值，常用语密码输入两次对比</td>
</tr>
<tr>
<td>IPAddress</td>
<td>验证ipv4网络地址</td>
</tr>
<tr>
<td>Length</td>
<td>验证输入字符串的长度</td>
</tr>
<tr>
<td>NumberRange</td>
<td>验证输入的值在数字范围内</td>
</tr>
<tr>
<td>Optional</td>
<td>无输入值时跳过其他验证函数</td>
</tr>
<tr>
<td>Required</td>
<td>确保字段有值</td>
</tr>
<tr>
<td>Regexp</td>
<td>使用正则表达式验证输入值</td>
</tr>
<tr>
<td>URL</td>
<td>验证url</td>
</tr>
<tr>
<td>AnyOf</td>
<td>确保输入值在可选列表</td>
</tr>
<tr>
<td>NoneOf</td>
<td>确保输入值不在可选列表</td>
</tr>
</tbody>
</table>
<h1 id="6-重定向和用户会话"><a href="#6-重定向和用户会话" class="headerlink" title="6. 重定向和用户会话"></a>6. 重定向和用户会话</h1><ul>
<li>目前hello.py 刷新会出现一警告，这个警告是因为最后一次提交是post请求导致的，所以使用url重定向让最后一次请求变为get请求,那么问题是之前的post参数怎么获取呢，不然网页无法渲染，这就需要session字典形式存储，get请求时从session中获取所需字段。</li>
</ul>
<figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> flask <span class="keyword">import</span> session,url_for</span><br><span class="line"></span><br><span class="line"><span class="meta">@app.route("/")</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">index</span><span class="params">()</span>:</span></span><br><span class="line">    form = NameForm()</span><br><span class="line">    <span class="keyword">if</span> form.validate_on_submit():</span><br><span class="line">        session[<span class="string">"name"</span>] = form.name.data</span><br><span class="line">        <span class="keyword">return</span> redirect(url_for(<span class="string">"index"</span>)) <span class="comment"># 一般endpoint就是视图函数名</span></span><br><span class="line">    <span class="keyword">return</span> render_template(<span class="string">"index.html"</span>, form=form, name = session.get(<span class="string">'name'</span>))</span><br><span class="line">    <span class="comment">#session.get 函数找不到name字段，返回None，网页有默认提示。</span></span><br></pre></td></tr></table></figure>
<h1 id="7-flash消息-闪现-闪烁"><a href="#7-flash消息-闪现-闪烁" class="headerlink" title="7. flash消息(闪现,闪烁)"></a>7. flash消息(闪现,闪烁)</h1><ul>
<li><p>主要用于警告，消息提醒，比如用户输入了错误的用户名和密码，需要一个提醒，就可以使用flash功能。</p>
</li>
<li><p>只调用flash函数是显示不出消息的，它主要是把消息push方式存入一个地方，然后程序使用模板渲染时可以pop方式获取到，所以flash消息就像队列，先进先出，只会显示一次。</p>
</li>
</ul>
<figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">form flask <span class="keyword">import</span> flash</span><br><span class="line"></span><br><span class="line"><span class="meta">@app route("/", methods=['GET','POST'])</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">index</span><span class="params">()</span>:</span></span><br><span class="line">    form = NameForm()</span><br><span class="line">    <span class="keyword">if</span> form.validate_on_submit():</span><br><span class="line">        old_name = session.get(<span class="string">"name"</span>)</span><br><span class="line">        <span class="keyword">if</span> old_name  <span class="keyword">is</span> <span class="keyword">not</span> <span class="keyword">None</span> <span class="keyword">and</span> old_name != form.name.data:</span><br><span class="line">            flash(<span class="string">"looks like you have change your name."</span>)</span><br><span class="line">        session[<span class="string">'name'</span>] = form.name.data</span><br><span class="line">        <span class="keyword">return</span> redirect(url_for(<span class="string">"index"</span>))</span><br><span class="line">    <span class="keyword">return</span> render_template(<span class="string">"index.html"</span>, form = form, name = sesson.get(<span class="string">"name"</span>))</span><br></pre></td></tr></table></figure>
<ul>
<li>在base.html 模板中渲染循环取出消息</li>
</ul>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">&#123;# content 部分添加for循环#&#125;</span><br><span class="line">&#123;% block content %&#125;</span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"container"</span>&gt;</span></span><br><span class="line">    &#123;# 增加一个 for循环#&#125;</span><br><span class="line">    &#123;% for message in get_flashed_messages() %&#125; </span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"alert alert-warning"</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">button</span> <span class="attr">type</span>=<span class="string">"button"</span> <span class="attr">class</span>=<span class="string">"close"</span> <span class="attr">data-dismiss</span>=<span class="string">"alert"</span>&gt;</span> $times;  <span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">            &#123;&#123; message &#125;&#125;</span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    &#123;% endfor %&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    &#123;% block page_content %&#125;  &#123;% endblock %&#125;</span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">&#123;% endblock %&#125;</span><br></pre></td></tr></table></figure>

        
        
        <p class="article-more-link">
          
       </p>
    </div>
    <footer class="article-footer clearfix">
<div class="article-catetags">

<div class="article-categories">
  <span></span>
  <a class="article-category-link" href="/categories/flask/">flask</a>
</div>


</div>




<div class="comments-count">
	
</div>

</footer>


    </article>






   
    
    <article class="post-expand post" itemprop="articleBody"> 
        <header class="article-info clearfix">
  <h1 itemprop="name">
    
      <a href="/2019/01/28/language/python/6_数据库2/" title="flask 第6章(数据库操作2)" itemprop="url">flask 第6章(数据库操作2)</a>
  </h1>
  <p class="article-author">By
       
		<a href="/about" title="wedvefv" target="_blank" itemprop="author">wedvefv</a>
		
  <p class="article-time">
    <time datetime="2019-01-28T14:22:00.000Z" itemprop="datePublished"> Published 2019-01-28</time>
    
  </p>
</header>
    <div class="article-content">
        
        <h2 id="创建数据写入数据"><a href="#创建数据写入数据" class="headerlink" title="创建数据写入数据"></a>创建数据写入数据</h2><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>db.create_all()</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">from</span> hello <span class="keyword">import</span> Role,User</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>admin_role=Role(name=<span class="string">"Admin"</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>mod_role = Role(name=<span class="string">"Moderator"</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>user_role=Role(name=<span class="string">"User"</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>user_john=User(username=<span class="string">"john"</span>,role=admin_role)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>user_susan=User(username=<span class="string">"susan"</span>,role=user_role)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>user_david = Ueser(username=<span class="string">"david"</span>,role=user_role)</span><br><span class="line"></span><br><span class="line">这个时候还没有写入数据库，比如打印</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>print(admin_role.id)</span><br><span class="line"><span class="keyword">None</span></span><br><span class="line"></span><br><span class="line">然后可以这样将之前的对象加入到回话中即可</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>db.session.add(mod_role)   </span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>db.session.add(user_role)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>db.session.add(user_john)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>db.session.add(user_david)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>db.session.commit() <span class="comment"># 没有这一句是不行的。</span></span><br><span class="line"></span><br><span class="line">或者可以全部添加</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>db.session.add([admin_role,mod_role,...])</span><br><span class="line"></span><br><span class="line">再次查看admin_role.id就有值了</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">print</span> admin_role.id</span><br><span class="line"><span class="number">1</span></span><br></pre></td></tr></table></figure>
<h2 id="修改一行"><a href="#修改一行" class="headerlink" title="修改一行"></a>修改一行</h2><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 比如修改admin_role的name为new_admin</span></span><br><span class="line"></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>admin_role.name = <span class="string">"new_admin"</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>db.session.add(admin_role)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>db.session.commit()</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">print</span> admin_role.name</span><br><span class="line">new_admin</span><br><span class="line">&gt;&gt;&gt;</span><br></pre></td></tr></table></figure>
<h2 id="删除一行"><a href="#删除一行" class="headerlink" title="删除一行"></a>删除一行</h2><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">db.session.delete(mod_role)</span><br><span class="line">db.session.commit()</span><br></pre></td></tr></table></figure>
<h2 id="查询行"><a href="#查询行" class="headerlink" title="查询行"></a>查询行</h2><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">查询<span class="number">2</span>个表所有字段</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>Role.query.all()</span><br><span class="line">[&lt;Role <span class="string">u'Moderator'</span>&gt; , &lt;Role <span class="string">u'new_admin'</span>&gt; , &lt;Role <span class="string">u'User'</span>&gt; ]</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>User.query.all()</span><br><span class="line">[&lt;User <span class="string">u'john'</span>&gt; , &lt;User <span class="string">u'susan'</span>&gt; , &lt;User <span class="string">u'david'</span>&gt; ]</span><br><span class="line">&gt;&gt;&gt;</span><br></pre></td></tr></table></figure>
<h2 id="常用的sql过滤器"><a href="#常用的sql过滤器" class="headerlink" title="常用的sql过滤器"></a>常用的sql过滤器</h2><p>|过滤器|说明|<br>||-|<br>|filter|把过滤器添加到查询上，返回一个新查询|<br>|filter_by|把等值过滤添加到原查询上，返回一个新查询|<br>|limit|指定原查询的数量限制|<br>|offset|便宜原查询的结果，返回一个新查询|<br>|order_by|根据指定条件对原查询进行排序，返回一个新查询|<br>|group_by|执行分组条件|</p>
<h2 id="过滤器之后可以跟执行函数"><a href="#过滤器之后可以跟执行函数" class="headerlink" title="过滤器之后可以跟执行函数"></a>过滤器之后可以跟执行函数</h2><table>
<thead>
<tr>
<th>方法</th>
<th>说明</th>
</tr>
</thead>
<tbody>
<tr>
<td>all</td>
<td>以列表的形式返回所有结果</td>
</tr>
<tr>
<td>first</td>
<td>返回查询的第一个结果，没有返回None</td>
</tr>
<tr>
<td>first_or_404</td>
<td>返回第一个查询结果，否则终止请求，返回404</td>
</tr>
<tr>
<td>get</td>
<td>返回指定主键对应的列，否则返回None</td>
</tr>
<tr>
<td>get_or_404</td>
<td>返回指定主键对应的行，否则返回404</td>
</tr>
<tr>
<td>count</td>
<td>返回结果数量</td>
</tr>
<tr>
<td>paginate</td>
<td>返回一个paginate对象，包含指定范围的结果</td>
</tr>
</tbody>
</table>

        
        
        <p class="article-more-link">
          
       </p>
    </div>
    <footer class="article-footer clearfix">
<div class="article-catetags">

<div class="article-categories">
  <span></span>
  <a class="article-category-link" href="/categories/flask/">flask</a>
</div>


</div>




<div class="comments-count">
	
</div>

</footer>


    </article>






   
    
    <article class="post-expand post" itemprop="articleBody"> 
        <header class="article-info clearfix">
  <h1 itemprop="name">
    
      <a href="/2019/01/28/language/python/1基本结构/" title="flask 第1章(基本结构和概念)" itemprop="url">flask 第1章(基本结构和概念)</a>
  </h1>
  <p class="article-author">By
       
		<a href="/about" title="wedvefv" target="_blank" itemprop="author">wedvefv</a>
		
  <p class="article-time">
    <time datetime="2019-01-28T14:22:00.000Z" itemprop="datePublished"> Published 2019-01-28</time>
    
  </p>
</header>
    <div class="article-content">
        
        <h1 id="开始和程序基本结构"><a href="#开始和程序基本结构" class="headerlink" title="开始和程序基本结构"></a>开始和程序基本结构</h1><h2 id="1-首先安装虚拟环境包和git工具"><a href="#1-首先安装虚拟环境包和git工具" class="headerlink" title="1.首先安装虚拟环境包和git工具"></a>1.首先安装虚拟环境包和git工具</h2><ul>
<li>sudo apt-get install python-virtualenv</li>
<li>sudo apt-get install git</li>
</ul>
<h2 id="2-创建一个目录"><a href="#2-创建一个目录" class="headerlink" title="2.创建一个目录"></a>2.创建一个目录</h2><ul>
<li>mkdir flask_learn</li>
<li>cd flask_learn</li>
</ul>
<h2 id="3-下载实例代码"><a href="#3-下载实例代码" class="headerlink" title="3.下载实例代码"></a>3.下载实例代码</h2><ul>
<li>git clone <a href="http://github.com/miguelgrinberg/flasky.git" target="_blank" rel="noopener">http://github.com/miguelgrinberg/flasky.git</a></li>
<li>cd flask</li>
<li>建立一个虚拟环境</li>
<li>virtualenv venv</li>
<li>激活虚拟环境</li>
<li>source venv/bin/activate</li>
<li>取消激活分区</li>
<li>deactivate</li>
<li>虚拟环境下安装pip</li>
<li>pip install flask</li>
<li>切换分支</li>
<li>git checkout 2a</li>
</ul>
<figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> flask <span class="keyword">import</span> Flask</span><br><span class="line">app = Flask(__name__)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="meta">@app.route('/')</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">index</span><span class="params">()</span>:</span></span><br><span class="line">    <span class="keyword">return</span> <span class="string">'&lt;h1&gt;Hello World!&lt;/h1&gt;'</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">"__main__"</span>:</span><br><span class="line">    app.run(debug=<span class="keyword">True</span>)</span><br></pre></td></tr></table></figure>
<ul>
<li>执行 python hello.py</li>
<li>浏览器输入<a href="http://127.0.0.1:5000/" target="_blank" rel="noopener">http://127.0.0.1:5000/</a> 就可以看到helloword了。</li>
<li>但是这样会出现一个问题。你在linux虚拟机里面执行的代码。在window上浏览器看就不行，需要设置</li>
<li>如下改动 app.run(debug=True，host=”0.0.0.0”)或者使用manage模块扩展传参数，后面会提到。</li>
</ul>
<h2 id="4-flask程序有四个上下文"><a href="#4-flask程序有四个上下文" class="headerlink" title="4. flask程序有四个上下文"></a>4. flask程序有四个上下文</h2><ul>
<li>curent_app  程序上下文， 当前激活的程序实例</li>
<li>g 程序上下文 处理请求的临时存储对象，每次请求都会重设这个变量。</li>
<li>request  请求上下文    请求对象，封装了每次http请求的内容</li>
<li>sesion  请求上下文    用户会话， 用于存储之间需要记住的值的词典。</li>
<li>这是个变量每次请求 都是独立属于这一次请求的，或者说是属于同一个线程内全局可见。</li>
</ul>
<h2 id="5-请求调度"><a href="#5-请求调度" class="headerlink" title="5. 请求调度"></a>5. 请求调度</h2><ul>
<li>这个主要是 url和处理函数的映射关系，即视图。</li>
<li>通过app.url_map 可以看到映射关系。</li>
<li>生成映射的方法2中，1 app.route修饰器 2，app.add_url_rule()</li>
</ul>
<h2 id="6-请求钩子"><a href="#6-请求钩子" class="headerlink" title="6. 请求钩子"></a>6. 请求钩子</h2><ul>
<li>主要是为了每个请求开始可能都需要认证，数据库连接等重复操作的代码复。</li>
<li>通过钩子装饰器，注册函数，在到达视图函数前运行这些函数。</li>
<li>有四种个钩子 brefore_first_request,brefore_request,after_request,teardown_request<blockquote>
<p>after_request 有没做处理的异常抛出时，是不运行的。<br>teardown_request 即使有没处理的异常抛出，也会运行。</p>
</blockquote>
</li>
</ul>
<h2 id="7-响应"><a href="#7-响应" class="headerlink" title="7. 响应"></a>7. 响应</h2><ul>
<li>flask 默认返回200 状态吗</li>
<li><p>可以返回其他状态吗</p>
<figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">return</span> <span class="string">"hello word!"</span>, <span class="number">400</span></span><br><span class="line">或者</span><br><span class="line"><span class="keyword">return</span> <span class="string">"hello world!"</span>, <span class="number">500</span>, &#123;<span class="string">"ua"</span>:<span class="number">10</span>&#125;</span><br><span class="line">返回的是一个元组，第二个是状态吗，第三个是header，字典形式。</span><br></pre></td></tr></table></figure>
</li>
<li><p>还可以使用make_response(“hello world!”, 500, {“ua”:10})生成一个对象，以便调用函数设置cookie等其他值。</p>
</li>
<li>320重定向，使用redirect(“<a href="http://www.baidu.com&quot;)函数。" target="_blank" rel="noopener">www.baidu.com&quot;)函数。</a></li>
<li>特殊响应，比如404 可以使用abort(404)函数，这个直接就吧控制权交给web服务器了，不会再调用其它函数。</li>
</ul>
<h2 id="8-flask扩展"><a href="#8-flask扩展" class="headerlink" title="8. flask扩展"></a>8. flask扩展</h2><ul>
<li><p>pip install flask-script</p>
</li>
<li><p>用manager吧app对象包住，这样就可以使用manager扩展了。</p>
</li>
</ul>
<figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> flask <span class="keyword">import</span> Flask</span><br><span class="line"><span class="keyword">from</span> flask_script <span class="keyword">import</span> Manager</span><br><span class="line"></span><br><span class="line">app = Flask(__name__)</span><br><span class="line"></span><br><span class="line">manager = Manager(app)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="meta">@app.route('/')</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">index</span><span class="params">()</span>:</span></span><br><span class="line">    <span class="keyword">return</span> <span class="string">'&lt;h1&gt;Hello World!&lt;/h1&gt;'</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="meta">@app.route('/user/&lt;name&gt;')</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">user</span><span class="params">(name)</span>:</span></span><br><span class="line">    <span class="keyword">return</span> <span class="string">'&lt;h1&gt;Hello, %s!&lt;/h1&gt;'</span> % name</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">'__main__'</span>:</span><br><span class="line">    manager.run()</span><br></pre></td></tr></table></figure>
<ul>
<li>启动服务：<blockquote>
<p>python hello.py  runserver –host 0.0.0.0</p>
</blockquote>
</li>
</ul>
<h2 id="9-模板的继承"><a href="#9-模板的继承" class="headerlink" title="9 模板的继承"></a>9 模板的继承</h2><ul>
<li>类似于python中的类的继承</li>
<li>首先需要一个基类模板base.html 然后把对应的可修改的块用    格式包含即可。</li>
</ul>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">&lt;html&gt;</span><br><span class="line">  &lt;haed&gt;</span><br><span class="line">  &#123;% block  head%&#125;  &#123;%endblock%&#125;</span><br><span class="line">  &#123;% block title%&#125; &#123;%endblock%&#125;</span><br><span class="line">  &lt;/head&gt;</span><br><span class="line">  &lt;body&gt;</span><br><span class="line">    &#123;%block body%&#125;  &#123;%endblock%&#125;</span><br><span class="line">  &lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure>
<ul>
<li>在子类模板中使用基类模板</li>
</ul>
<figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">&#123;%extends <span class="string">"base.html"</span>% &#125;</span><br><span class="line"></span><br><span class="line">&#123;%block title%&#125; 这是index标题 &#123;%endblock%&#125;</span><br><span class="line"></span><br><span class="line">&#123;%block head%&#125;</span><br><span class="line">  &#123;&#123;super()&#125;&#125;   <span class="comment">#基类head部分原本的内容用supper获取</span></span><br><span class="line">  &lt;style&gt;</span><br><span class="line">  &lt;/style&gt;</span><br><span class="line">&#123;%endblock%&#125;</span><br><span class="line"></span><br><span class="line">&#123;%block body%&#125;</span><br><span class="line">  &lt;h1&gt; hello world &lt;/h1&gt;</span><br><span class="line">&#123;%endblock%&#125;</span><br></pre></td></tr></table></figure>

        
        
        <p class="article-more-link">
          
       </p>
    </div>
    <footer class="article-footer clearfix">
<div class="article-catetags">

<div class="article-categories">
  <span></span>
  <a class="article-category-link" href="/categories/flask/">flask</a>
</div>


</div>




<div class="comments-count">
	
</div>

</footer>


    </article>






   
    
    <article class="post-expand post" itemprop="articleBody"> 
        <header class="article-info clearfix">
  <h1 itemprop="name">
    
      <a href="/2019/01/28/language/python/2_模板/" title="flask 第2章(模板)" itemprop="url">flask 第2章(模板)</a>
  </h1>
  <p class="article-author">By
       
		<a href="/about" title="wedvefv" target="_blank" itemprop="author">wedvefv</a>
		
  <p class="article-time">
    <time datetime="2019-01-28T14:22:00.000Z" itemprop="datePublished"> Published 2019-01-28</time>
    
  </p>
</header>
    <div class="article-content">
        
        <h1 id="模板"><a href="#模板" class="headerlink" title="模板"></a>模板</h1><h2 id="1-jinja2模板引擎"><a href="#1-jinja2模板引擎" class="headerlink" title="1. jinja2模板引擎"></a>1. jinja2模板引擎</h2><ul>
<li>创建模板目录</li>
<li>mkdir templates</li>
<li>cd templates</li>
<li>vim index.html</li>
<li><p>输入 &lt;h1> hello world! &lt;/h1></p>
</li>
<li><p>vim user.html</p>
</li>
<li>输入 &lt;h1> hello  &lt;/h1></li>
</ul>
<h2 id="2-变量"><a href="#2-变量" class="headerlink" title="2. 变量"></a>2. 变量</h2><h3 id="普通变量"><a href="#普通变量" class="headerlink" title="普通变量"></a>普通变量</h3><ul>
<li>占位符变量可以是python中的类型<figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&#123;&#123; mydict[<span class="string">'key'</span>] &#125;&#125;</span><br><span class="line">&#123;&#123; mylist[<span class="number">3</span>] &#125;&#125;</span><br><span class="line">&#123;&#123; mylist[value] &#125;&#125;</span><br><span class="line">&#123;&#123; obje.func() &#125;&#125;</span><br></pre></td></tr></table></figure>
</li>
</ul>
<h3 id="过滤器"><a href="#过滤器" class="headerlink" title="过滤器"></a>过滤器</h3><ul>
<li>hello   把name转成搜字符大写。</li>
</ul>
<table>
<thead>
<tr>
<th>过滤器名字</th>
<th>说明</th>
</tr>
</thead>
<tbody>
<tr>
<td>safe</td>
<td>渲染时不转义</td>
</tr>
<tr>
<td>capitalize</td>
<td>首字母大写</td>
</tr>
<tr>
<td>lower</td>
<td>转成小写</td>
</tr>
<tr>
<td>upper</td>
<td>转成大写</td>
</tr>
<tr>
<td>title</td>
<td>每个单词首字母转大写</td>
</tr>
<tr>
<td>trim</td>
<td>去掉首尾空格</td>
</tr>
<tr>
<td>striptags</td>
<td>渲染前把其中的html标签都删除掉</td>
</tr>
</tbody>
</table>
<ul>
<li>safe 常用在现实html代码本身，不然标签会被引擎默认转义(这样也是为了安全考虑)。</li>
<li>不要再不可信的值上使用safe过滤器，比如表单输入。</li>
</ul>
<h2 id="3-控制结构"><a href="#3-控制结构" class="headerlink" title="3. 控制结构"></a>3. 控制结构</h2><h3 id="if结构"><a href="#if结构" class="headerlink" title="if结构"></a>if结构</h3><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&#123; % <span class="keyword">if</span> user %&#125;</span><br><span class="line">  hello &#123;&#123;user&#125;&#125;</span><br><span class="line">&#123;% <span class="keyword">else</span> %&#125;</span><br><span class="line">  hello stranger</span><br><span class="line">&#123;% endif %&#125;</span><br></pre></td></tr></table></figure>
<h3 id="for循环结构"><a href="#for循环结构" class="headerlink" title="for循环结构"></a>for循环结构</h3><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&lt;ul&gt;</span><br><span class="line">&#123; % <span class="keyword">for</span> x <span class="keyword">in</span> list %&#125;</span><br><span class="line">  &lt;li&gt;&#123;&#123; x &#125;&#125;&lt;/li&gt;</span><br><span class="line">&#123; %endfor% &#125;</span><br><span class="line">&lt;/ul&gt;</span><br></pre></td></tr></table></figure>
<h3 id="宏。-类似python的函数"><a href="#宏。-类似python的函数" class="headerlink" title="宏。 类似python的函数"></a>宏。 类似python的函数</h3><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">* 定义宏</span><br><span class="line"> &#123;% macro render_comment(x) %&#125;</span><br><span class="line">  &lt;li&gt;&#123;&#123; x &#125;&#125;&lt;/li&gt;</span><br><span class="line"> &#123;% endmacro%&#125;</span><br><span class="line"></span><br><span class="line">* 使用</span><br><span class="line"></span><br><span class="line">&lt;ul&gt;</span><br><span class="line"> &#123;% <span class="keyword">for</span> x <span class="keyword">in</span> list %&gt;</span><br><span class="line">    &#123;&#123; render_comment(x) &#125;&#125;</span><br><span class="line"> &#123; %endfor%&#125;</span><br><span class="line"> &lt;/ul&gt;</span><br><span class="line"></span><br><span class="line">* 可以将宏放入单独的文件，一边重复使用，使用时导入即可。</span><br><span class="line">&#123; % <span class="keyword">import</span> <span class="string">'macros.html'</span> <span class="keyword">as</span> macros % &#125;</span><br><span class="line">&lt;ul&gt;</span><br><span class="line">   &#123;% <span class="keyword">for</span> x <span class="keyword">in</span> list %&gt;</span><br><span class="line">      &#123;&#123; macros.render_comment(x) &#125;&#125;</span><br><span class="line">   &#123; %endfor%&#125;</span><br><span class="line">&lt;/ul&gt;</span><br><span class="line"></span><br><span class="line">* 需要重复使用的模板也可单独放一个文件中</span><br><span class="line">用到的地方 &#123;% include <span class="string">'common.html'</span>%&#125; 包含即可。</span><br></pre></td></tr></table></figure>

        
        
        <p class="article-more-link">
          
       </p>
    </div>
    <footer class="article-footer clearfix">
<div class="article-catetags">

<div class="article-categories">
  <span></span>
  <a class="article-category-link" href="/categories/flask/">flask</a>
</div>


</div>




<div class="comments-count">
	
</div>

</footer>


    </article>






   
    
    <article class="post-expand post" itemprop="articleBody"> 
        <header class="article-info clearfix">
  <h1 itemprop="name">
    
      <a href="/2018/10/05/linux/2018-10-05_linux/" title="最小化安装centos7配置问题" itemprop="url">最小化安装centos7配置问题</a>
  </h1>
  <p class="article-author">By
       
		<a href="/about" title="wedvefv" target="_blank" itemprop="author">wedvefv</a>
		
  <p class="article-time">
    <time datetime="2018-10-05T02:34:58.000Z" itemprop="datePublished"> Published 2018-10-05</time>
    
  </p>
</header>
    <div class="article-content">
        
        <h1 id="最小化安装启用网卡"><a href="#最小化安装启用网卡" class="headerlink" title="最小化安装启用网卡"></a>最小化安装启用网卡</h1><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">vi /etc/sysconfig/network-scripts/ifcfg-[网卡]</span><br><span class="line"></span><br><span class="line">修改 ONBOOT=yes</span><br><span class="line">service network restart</span><br></pre></td></tr></table></figure>
<h1 id="ip-命令替代了config-常见用法"><a href="#ip-命令替代了config-常见用法" class="headerlink" title="ip  命令替代了config, 常见用法"></a>ip  命令替代了config, 常见用法</h1><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">ip link show                           # 显示网络接口信息</span><br><span class="line"></span><br><span class="line">ip link set eth0 upi                   # 开启网卡</span><br><span class="line"></span><br><span class="line">ip link set eth0 down                  # 关闭网卡</span><br><span class="line"></span><br><span class="line">ip link set eth0 promisc on            # 开启网卡的混合模式</span><br><span class="line"></span><br><span class="line">ip link set eth0 promisc offi          # 关闭网卡的混个模式</span><br><span class="line"></span><br><span class="line">ip link set eth0 txqueuelen 1200       # 设置网卡队列长度</span><br><span class="line"></span><br><span class="line">ip link set eth0 mtu 1400              # 设置网卡最大传输单元</span><br><span class="line"></span><br><span class="line">ip addr show                           # 显示网卡IP信息</span><br><span class="line"></span><br><span class="line">ip addr add 192.168.0.1/24 dev eth0    # 设置eth0网卡IP地址192.168.0.1</span><br><span class="line"></span><br><span class="line">ip addr del 192.168.0.1/24 dev eth0    # 删除eth0网卡IP地址</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">ip route list                                            # 查看路由信息</span><br><span class="line"></span><br><span class="line">ip route add 192.168.4.0/24  via  192.168.0.254 dev eth0 # 设置192.168.4.0网段的网关为192.168.0.254,数据走eth0接口</span><br><span class="line"></span><br><span class="line">ip route add default via  192.168.0.254  dev eth0        # 设置默认网关为192.168.0.254</span><br></pre></td></tr></table></figure>
<h1 id="英文环境的mac远程centos虚拟机乱码"><a href="#英文环境的mac远程centos虚拟机乱码" class="headerlink" title="英文环境的mac远程centos虚拟机乱码"></a>英文环境的mac远程centos虚拟机乱码</h1><h2 id="原因分析"><a href="#原因分析" class="headerlink" title="原因分析"></a>原因分析</h2><ul>
<li><p>mac默认是</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">LANG=en_US.utf-8  // 设置区域语言，比如提示信息，日期等等</span><br><span class="line">LC_ALL=en_US.utf-8</span><br></pre></td></tr></table></figure>
</li>
<li><p>远程虚拟机最小化安装<br>  echo $LANG </p>
</li>
</ul>
<h2 id="linux-配置问价加载顺序是"><a href="#linux-配置问价加载顺序是" class="headerlink" title="linux 配置问价加载顺序是"></a>linux 配置问价加载顺序是</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">默认登陆方式，</span><br><span class="line">/etc/enviroment-&gt;/etc/profile --&gt;$HOME/.profile   --&gt;$HOME/.env</span><br></pre></td></tr></table></figure>
<ul>
<li>/etc/profile是登陆后读取的，如果文件显示乱码，可以在/etc/profile中配置</li>
</ul>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">vim /etc/profile</span><br><span class="line">export LC_ALL=zh_CN.utf-8</span><br></pre></td></tr></table></figure>
<h1 id="如果ssh远程出现如下问题"><a href="#如果ssh远程出现如下问题" class="headerlink" title="如果ssh远程出现如下问题"></a>如果ssh远程出现如下问题</h1><ul>
<li>“-bash: 警告:setlocale: LC_CTYPE: 无法改变区域选项 (UTF-8): 没有那个文件或目录”</li>
</ul>
<p>是加载/etc/enviroment文件,找LANG变量</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">vim /etc/environment</span><br><span class="line">LANG=zh_CN.utf-8</span><br><span class="line">如果/etc/environment 中没有设置该变量LANG，依然会报错，不能在profile中设置</span><br></pre></td></tr></table></figure>

        
        
        <p class="article-more-link">
          
       </p>
    </div>
    <footer class="article-footer clearfix">
<div class="article-catetags">

<div class="article-categories">
  <span></span>
  <a class="article-category-link" href="/categories/linux/">linux</a>
</div>


  <div class="article-tags">
  
  <span></span> <a href="/tags/hexo/">hexo</a>
  </div>

</div>




<div class="comments-count">
	
</div>

</footer>


    </article>






   
    
    <article class="post-expand post" itemprop="articleBody"> 
        <header class="article-info clearfix">
  <h1 itemprop="name">
    
      <a href="/2018/06/30/linux/centos6.4install-mysql-python/" title="centos6.4 安装python mysql扩展" itemprop="url">centos6.4 安装python mysql扩展</a>
  </h1>
  <p class="article-author">By
       
		<a href="/about" title="wedvefv" target="_blank" itemprop="author">wedvefv</a>
		
  <p class="article-time">
    <time datetime="2018-06-30T02:15:00.000Z" itemprop="datePublished"> Published 2018-06-30</time>
    
  </p>
</header>
    <div class="article-content">
        
        <p>要想使python可以操作mysql 就需要MySQL-python驱动，它是python 操作mysql必不可少的模块。</p>
<p>下载地址：<a href="https://pypi.python.org/pypi/MySQL-python/" target="_blank" rel="noopener">https://pypi.python.org/pypi/MySQL-python/</a></p>
<p>下载MySQL-python-1.2.5.zip 文件之后直接解压。进入MySQL-python-1.2.5目录:</p>
<p>python setup.py install</p>
<p>报错：</p>
<p>[root@centos7 MySQL-python-1.2.4]# python setup.py install</p>
<p>sh: mysql_config: command not found</p>
<p>Traceback (most recent call last):</p>
<p>  File “setup.py”, line 18, in <module></module></p>
<pre><code>metadata, options = get_config()
</code></pre><p>  File “/root/MySQL-python-1.2.4/setup_posix.py”, line 43, in get_config</p>
<pre><code>libs = mysql_config(&quot;libs_r&quot;)
</code></pre><p>  File “/root/MySQL-python-1.2.4/setup_posix.py”, line 25, in mysql_config</p>
<pre><code>raise EnvironmentError(&quot;%s not found&quot; % (mysql_config.path,))
</code></pre><p>EnvironmentError: mysql_config not found</p>
<p>网上查了一下需安装mysql-devel </p>
<p>#yum -y install mysql-devel </p>
<p>安装成功后</p>
<h1 id="python-setup-py-install"><a href="#python-setup-py-install" class="headerlink" title="python setup.py install"></a>python setup.py install</h1><p>安装成功。</p>

        
        
        <p class="article-more-link">
          
       </p>
    </div>
    <footer class="article-footer clearfix">
<div class="article-catetags">

<div class="article-categories">
  <span></span>
  <a class="article-category-link" href="/categories/c/">c</a>
</div>


</div>




<div class="comments-count">
	
</div>

</footer>


    </article>






   
    
    <article class="post-expand post" itemprop="articleBody"> 
        <header class="article-info clearfix">
  <h1 itemprop="name">
    
      <a href="/2018/06/30/linux/centos6.4升级python/" title="centos6.4 升级python到2.7" itemprop="url">centos6.4 升级python到2.7</a>
  </h1>
  <p class="article-author">By
       
		<a href="/about" title="wedvefv" target="_blank" itemprop="author">wedvefv</a>
		
  <p class="article-time">
    <time datetime="2018-06-30T02:15:00.000Z" itemprop="datePublished"> Published 2018-06-30</time>
    
  </p>
</header>
    <div class="article-content">
        
        <h1 id="1-download-source"><a href="#1-download-source" class="headerlink" title="1. download source"></a>1. download source</h1><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">wget https:<span class="comment">//www.python.org/ftp/python/2.7.12/Python-2.7.12.tgz</span></span><br></pre></td></tr></table></figure>
<h1 id="2-compire-and-install"><a href="#2-compire-and-install" class="headerlink" title="2. compire and install"></a>2. compire and install</h1><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">tar zxvf Python<span class="number">-2.7</span><span class="number">.12</span>.tgz</span><br><span class="line">cd Python<span class="number">-2.7</span><span class="number">.12</span></span><br><span class="line">./configure --prefix=/usr/local/python27 &amp;&amp; make &amp;&amp; make install &amp;&amp; echo $?</span><br><span class="line">如果以上输出为<span class="number">0</span>，说明没有报错，安装正常</span><br></pre></td></tr></table></figure>
<h1 id="3-add-path-and-backup-the-python2-6"><a href="#3-add-path-and-backup-the-python2-6" class="headerlink" title="3. add path and backup the python2.6"></a>3. add path and backup the python2.6</h1><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">移除以前的版本</span><br><span class="line">mv /usr/bin/python /usr/bin/python26</span><br><span class="line">创建软连接</span><br><span class="line">ln -s /usr/local/python27/bin/python /usr/bin/python</span><br><span class="line">查看版本是否升级成功</span><br><span class="line">python -V</span><br><span class="line">Python <span class="number">2.7</span><span class="number">.12</span></span><br></pre></td></tr></table></figure>
<h1 id="4-modify-yum"><a href="#4-modify-yum" class="headerlink" title="4. modify yum"></a>4. modify yum</h1><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">如果不修改此项，会导致yum无法使用</span><br><span class="line">vim /usr/bin/yum</span><br><span class="line">修改第一行即可，将环境变量指向以前的python版本</span><br><span class="line">#!/usr/bin/python26</span><br></pre></td></tr></table></figure>
<h1 id="5-reinstall-pip"><a href="#5-reinstall-pip" class="headerlink" title="5. reinstall pip"></a>5. reinstall pip</h1><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">1.</span>安装pip之前首先需要安装setuptools</span><br><span class="line">下载链接</span><br><span class="line">https:<span class="comment">//pypi.python.org/pypi/setuptools</span></span><br><span class="line">下载地址</span><br><span class="line">wget https:<span class="comment">//pypi.python.org/packages/ff/d4/209f4939c49e31f5524fa0027bf1c8ec3107abaf7c61fdaad704a648c281/setuptools-21.0.0.tar.gz#md5=81964fdb89534118707742e6d1a1ddb4 --no-check-certificate</span></span><br><span class="line">解压</span><br><span class="line">tar zxvf setuptools<span class="number">-21.0</span><span class="number">.0</span>.tar.gz</span><br><span class="line">安装</span><br><span class="line">cd setuptools<span class="number">-21.0</span><span class="number">.0</span></span><br><span class="line">python setup.py  install</span><br><span class="line"></span><br><span class="line"><span class="number">2.</span>安装pip</span><br><span class="line">下载链接</span><br><span class="line">https:<span class="comment">//pypi.python.org/pypi/pip</span></span><br><span class="line">下载地址</span><br><span class="line">wget https:<span class="comment">//pypi.python.org/packages/41/27/9a8d24e1b55bd8c85e4d022da2922cb206f183e2d18fee4e320c9547e751/pip-8.1.1.tar.gz#md5=6b86f11841e89c8241d689956ba99ed7 --no-check-certificate</span></span><br><span class="line">解压</span><br><span class="line">tar zxvf pip<span class="number">-8.1</span><span class="number">.1</span>.tar.gz </span><br><span class="line">安装 </span><br><span class="line">cd pip<span class="number">-8.1</span><span class="number">.1</span></span><br><span class="line">python setup.py install</span><br><span class="line"></span><br><span class="line"><span class="number">3.</span>添加环境变量</span><br><span class="line">安装完之后，之后执行pip还是调用的以前的环境变量，需要手动添加环境变量</span><br><span class="line">mv /usr/bin/pip /usr/bin/pip26</span><br><span class="line">ln -s /usr/local/python27/bin/pip /usr/bin/</span><br><span class="line">再次查看版本</span><br><span class="line">pip -V</span><br><span class="line">pip <span class="number">8.1</span><span class="number">.1</span> from /usr/local/python27/lib/python2<span class="number">.7</span>/site-packages/pip<span class="number">-8.1</span><span class="number">.1</span>-py2<span class="number">.7</span>.egg (python <span class="number">2.7</span>)</span><br></pre></td></tr></table></figure>
<h1 id="6-使用pip安装第三方库"><a href="#6-使用pip安装第三方库" class="headerlink" title="6.使用pip安装第三方库"></a>6.使用pip安装第三方库</h1><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">如果报错locale.Error: unsupported locale setting</span><br><span class="line">加入环境变量：</span><br><span class="line"><span class="keyword">export</span> LANGUAGE=en_US.UTF<span class="number">-8</span></span><br><span class="line"><span class="keyword">export</span> LC_ALL=en_US.UTF<span class="number">-8</span></span><br><span class="line"></span><br><span class="line">pip install psutil</span><br><span class="line">pip install MySQLdb-python</span><br><span class="line">pip install django=<span class="number">1.8</span><span class="number">.2</span></span><br><span class="line"></span><br><span class="line">报错：</span><br><span class="line"> pip install MySQLdb-python</span><br><span class="line">Collecting MySQLdb-python</span><br><span class="line">  Retrying (Retry(total=4, connect=None, read=None, redirect=None)) after connection broken by 'ReadTimeoutError("HTTPSConnectionPool(host='pypi.python.org', port=443): Read timed out. (read timeout=15)",)': /simple/mysqldb-python/</span><br><span class="line">  Could <span class="keyword">not</span> find a version that satisfies the requirement MySQLdb-python (from versions: )</span><br><span class="line">No matching distribution found <span class="keyword">for</span> MySQLdb-python</span><br><span class="line">You are <span class="keyword">using</span> pip version <span class="number">8.1</span><span class="number">.1</span>, however version <span class="number">9.0</span><span class="number">.1</span> is available.</span><br><span class="line">You should consider upgrading via the 'pip install --upgrade pip' command.</span><br><span class="line">当安装中提示版本太低的时候，执行提示的命令进行升级即可</span><br><span class="line">pip install --upgrade pip</span><br><span class="line">升级完重新执行要安装的库</span><br></pre></td></tr></table></figure>

        
        
        <p class="article-more-link">
          
       </p>
    </div>
    <footer class="article-footer clearfix">
<div class="article-catetags">


</div>




<div class="comments-count">
	
</div>

</footer>


    </article>






   
    
    <article class="post-expand post" itemprop="articleBody"> 
        <header class="article-info clearfix">
  <h1 itemprop="name">
    
      <a href="/2018/05/26/linux/git_2_operate/" title="git 常见操作" itemprop="url">git 常见操作</a>
  </h1>
  <p class="article-author">By
       
		<a href="/about" title="wedvefv" target="_blank" itemprop="author">wedvefv</a>
		
  <p class="article-time">
    <time datetime="2018-05-26T04:00:00.000Z" itemprop="datePublished"> Published 2018-05-26</time>
    
  </p>
</header>
    <div class="article-content">
        
        <h2 id="创建分支"><a href="#创建分支" class="headerlink" title="创建分支"></a>创建分支</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git branch new_branch</span><br></pre></td></tr></table></figure>
<h2 id="本地删除分支"><a href="#本地删除分支" class="headerlink" title="本地删除分支"></a>本地删除分支</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git branch -D delete_branch</span><br></pre></td></tr></table></figure>
<h2 id="更新到远程删除分支"><a href="#更新到远程删除分支" class="headerlink" title="更新到远程删除分支"></a>更新到远程删除分支</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">git checkout master </span><br><span class="line">git pull -u   -u origin :delete_branch</span><br></pre></td></tr></table></figure>
<h2 id="git-pull-失败提示fatal-refusing-to-merge-unrelated-histories-处理方法"><a href="#git-pull-失败提示fatal-refusing-to-merge-unrelated-histories-处理方法" class="headerlink" title="git pull 失败提示fatal: refusing to merge unrelated histories ,处理方法"></a>git pull 失败提示fatal: refusing to merge unrelated histories ,处理方法</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git pull origin master --allow-unrelated-historiesn</span><br></pre></td></tr></table></figure>
<h1 id="查看提交提记录"><a href="#查看提交提记录" class="headerlink" title="查看提交提记录"></a>查看提交提记录</h1><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">git log</span><br><span class="line">git log -p -2  #查看最近两次的提交差异</span><br><span class="line">git log --stat #仅仅现实行数的变更</span><br><span class="line">git log --pretty=oneline #每次提交，在一行显示</span><br><span class="line">git log --pretty=format:"%h - %an, %ar : %s"   #格式显示</span><br></pre></td></tr></table></figure>
<table>
<thead>
<tr>
<th>选项</th>
<th>说明</th>
</tr>
</thead>
<tbody>
<tr>
<td>%H</td>
<td>提交对象（提交）的完整哈希字串</td>
</tr>
<tr>
<td>%h</td>
<td>提交对象的简短哈希字串</td>
</tr>
<tr>
<td>%T</td>
<td>树对象（树）的完整哈希字串</td>
</tr>
<tr>
<td>%t</td>
<td>树对象的简短哈希字串</td>
</tr>
<tr>
<td>%P</td>
<td>父对象（父）的完整哈希字串</td>
</tr>
<tr>
<td>%p</td>
<td>父对象的简短哈希字串</td>
</tr>
<tr>
<td>%an</td>
<td>作者（作者）的名字</td>
</tr>
<tr>
<td>%ae</td>
<td>作者的电子邮件地址</td>
</tr>
<tr>
<td>%ad</td>
<td>作者修订日期（可以用-date =选项定制格式）</td>
</tr>
<tr>
<td>%ar</td>
<td>作者修订日期，按多久以前的方式显示</td>
</tr>
<tr>
<td>%cn</td>
<td>提交者（提交者）的名字</td>
</tr>
<tr>
<td>%ce</td>
<td>提交者的电子邮件地址</td>
</tr>
<tr>
<td>%cd</td>
<td>提交日期</td>
</tr>
<tr>
<td>%cr</td>
<td>提交日期，按多久以前的方式显示</td>
</tr>
<tr>
<td>%s</td>
<td>提交说明</td>
</tr>
</tbody>
</table>
<h1 id="待续……"><a href="#待续……" class="headerlink" title="待续……"></a>待续……</h1>
        
        
        <p class="article-more-link">
          
       </p>
    </div>
    <footer class="article-footer clearfix">
<div class="article-catetags">

<div class="article-categories">
  <span></span>
  <a class="article-category-link" href="/categories/git/">git</a>
</div>


  <div class="article-tags">
  
  <span></span> <a href="/tags/git/">git</a>
  </div>

</div>




<div class="comments-count">
	
</div>

</footer>


    </article>






   
    
    <article class="post-expand post" itemprop="articleBody"> 
        <header class="article-info clearfix">
  <h1 itemprop="name">
    
      <a href="/2017/01/08/linux/windows_pipe/" title="windows 管道通信" itemprop="url">windows 管道通信</a>
  </h1>
  <p class="article-author">By
       
		<a href="/about" title="wedvefv" target="_blank" itemprop="author">wedvefv</a>
		
  <p class="article-time">
    <time datetime="2017-01-08T06:11:00.000Z" itemprop="datePublished"> Published 2017-01-08</time>
    
  </p>
</header>
    <div class="article-content">
        
        <p>#windows 管道通信</p>
<p>思路如下：<br>server端：<br>1 建立一个可读可写的管道<br>2 将cmd /c+命令建立的执行进程的输出（stdOutput）和错误(stdError)<br>与管道写端关联。就是把cmd执行命令的结果写进管道。<br>3 recv client端发来的命令比如： “dir”<br>4 组合成字符串”c:/windows/system32/cmd.exe /cdir”<br>5 利用字符串建立进程，就是执行的意思<br>6 sleep(1000) 停止一秒，让进程完全执行完输出结果<br>否则可能进程没执行完毕，就向下执行了，导致管道中<br>只有部分cmd命令执行的结果。<br>7 while循环ReadFile读取管道中的数据<br>8 send发送数据给client端，显示</p>
<p>client端：<br>这个很简单，建立一个阻塞的socket ，循环发送你想法的<br>命令，到server端执行就可以了。</p>
<p>server端代码：<br><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//server.cpp  </span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">"stdafx.h"</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;winsock2.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">pragma</span> comment(lib, <span class="meta-string">"ws2_32.lib"</span>)</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">(<span class="keyword">int</span> argc, <span class="keyword">char</span>* argv[])</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"></span><br><span class="line">    SOCKET sClient;</span><br><span class="line">    BYTE minorVer = <span class="number">2</span>; </span><br><span class="line">    BYTE majorVer = <span class="number">2</span>;</span><br><span class="line">    WSADATA wsaData;</span><br><span class="line">    WORD sockVersion = MAKEWORD(minorVer, majorVer);</span><br><span class="line">    <span class="keyword">if</span>(WSAStartup(sockVersion, &amp;wsaData) != <span class="number">0</span>)</span><br><span class="line">        <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">    SOCKET sListen = socket(AF_INET, SOCK_STREAM, IPPROTO_TCP);</span><br><span class="line">    <span class="keyword">if</span>(sListen == INVALID_SOCKET)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">"socket error \n"</span>);</span><br><span class="line">        <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    sockaddr_in <span class="built_in">sin</span>;</span><br><span class="line">    <span class="built_in">sin</span>.sin_family = AF_INET;</span><br><span class="line">    <span class="built_in">sin</span>.sin_port = htons(<span class="number">4500</span>);</span><br><span class="line">    <span class="built_in">sin</span>.sin_addr.S_un.S_addr = INADDR_ANY;  </span><br><span class="line">    <span class="keyword">if</span>(bind(sListen, (LPSOCKADDR)&amp;<span class="built_in">sin</span>, <span class="keyword">sizeof</span>(<span class="built_in">sin</span>)) == SOCKET_ERROR)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">"bind error \n"</span>);</span><br><span class="line">        <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span>(listen(sListen, <span class="number">5</span>) == SOCKET_ERROR)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">"listen error \n"</span>);</span><br><span class="line">        <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    sClient  =accept(sListen,<span class="literal">NULL</span>,<span class="literal">NULL</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">//  send(sClient,wMessage,strlen(wMessage),0);</span></span><br><span class="line">    <span class="keyword">char</span> rBuffer[<span class="number">4096</span>] = &#123;<span class="number">0</span>&#125;;</span><br><span class="line">    <span class="keyword">char</span> totalbuffer[<span class="number">4096</span>] =&#123;<span class="number">0</span>&#125;;</span><br><span class="line">    <span class="keyword">char</span> cmdline[<span class="number">256</span>]=&#123;<span class="number">0</span>&#125;;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">while</span>(<span class="literal">true</span>)</span><br><span class="line">    &#123;</span><br><span class="line"></span><br><span class="line">        <span class="built_in">memset</span>(cmdline,<span class="number">0</span>,<span class="number">256</span>);</span><br><span class="line">        SECURITY_ATTRIBUTES sa;</span><br><span class="line">        HANDLE hRead,hWrite;</span><br><span class="line">        sa.nLength = <span class="keyword">sizeof</span>(SECURITY_ATTRIBUTES);</span><br><span class="line">        sa.lpSecurityDescriptor = <span class="literal">NULL</span>;</span><br><span class="line">        sa.bInheritHandle = TRUE;</span><br><span class="line">        <span class="keyword">if</span> (!CreatePipe(&amp;hRead,&amp;hWrite,&amp;sa,<span class="number">0</span>)) </span><br><span class="line">        &#123;</span><br><span class="line">            <span class="built_in">printf</span>(<span class="string">"CreatePipe Error"</span>);</span><br><span class="line">            <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">        &#125;   </span><br><span class="line">        STARTUPINFO si;</span><br><span class="line">        PROCESS_INFORMATION pi; </span><br><span class="line">        si.cb = <span class="keyword">sizeof</span>(STARTUPINFO);</span><br><span class="line">        GetStartupInfo(&amp;si); </span><br><span class="line"></span><br><span class="line">        si.hStdError = hWrite;</span><br><span class="line">        si.hStdOutput = hWrite;</span><br><span class="line">        si.wShowWindow = SW_HIDE;</span><br><span class="line">        si.dwFlags = STARTF_USESHOWWINDOW | STARTF_USESTDHANDLES;</span><br><span class="line">        </span><br><span class="line">        GetSystemDirectory(cmdline,<span class="keyword">sizeof</span>(cmdline));</span><br><span class="line">        <span class="built_in">strcat</span>(cmdline,<span class="string">"\\cmd.exe /c"</span>);</span><br><span class="line">        <span class="keyword">char</span> cmdbuff[<span class="number">256</span>];</span><br><span class="line">        ZeroMemory(cmdbuff,<span class="keyword">sizeof</span>(cmdbuff));    </span><br><span class="line">    </span><br><span class="line">        recv(sClient,cmdbuff,<span class="number">256</span>,<span class="literal">NULL</span>);</span><br><span class="line">        <span class="built_in">strncat</span>(cmdline,cmdbuff,<span class="built_in">strlen</span>(cmdbuff));</span><br><span class="line">        <span class="keyword">if</span> (!CreateProcess(<span class="literal">NULL</span>,cmdline,<span class="literal">NULL</span>,<span class="literal">NULL</span>,TRUE,<span class="literal">NULL</span>,<span class="literal">NULL</span>,<span class="literal">NULL</span>,&amp;si,&amp;pi))     </span><br><span class="line">        &#123;</span><br><span class="line">            <span class="built_in">printf</span>(<span class="string">"CreateProcess Error"</span>);</span><br><span class="line">            <span class="keyword">continue</span>;</span><br><span class="line">        &#125;</span><br><span class="line">            ZeroMemory(cmdbuff,<span class="keyword">sizeof</span>(cmdbuff));</span><br><span class="line">    </span><br><span class="line">        CloseHandle(hWrite);</span><br><span class="line">        DWORD dwRead;</span><br><span class="line">        Sleep(<span class="number">1000</span>);</span><br><span class="line">     <span class="keyword">while</span>(ReadFile(hRead,rBuffer,<span class="number">4096</span>,&amp;dwRead,<span class="literal">NULL</span>))</span><br><span class="line">        &#123;  </span><br><span class="line">            <span class="keyword">char</span> a[<span class="number">4</span>] =&#123;<span class="number">0</span>&#125;;</span><br><span class="line">            <span class="built_in">sprintf</span>(a,<span class="string">"%d"</span>,dwRead); <span class="comment">//把数字转换成字符串放入数组</span></span><br><span class="line">            lstrcpy(totalbuffer,a); <span class="comment">// 把总字节数写入数据最前面</span></span><br><span class="line">            lstrcat(totalbuffer,<span class="string">"#"</span>);<span class="comment">//在加一个#符表示数字部分结束</span></span><br><span class="line">            lstrcat(totalbuffer,rBuffer);<span class="comment">//缀数据部分</span></span><br><span class="line">            <span class="built_in">printf</span>(<span class="string">"%d"</span>,dwRead);</span><br><span class="line">            send(sClient,totalbuffer,dwRead+<span class="number">5</span>,<span class="number">0</span>); <span class="comment">//发送</span></span><br><span class="line">            <span class="built_in">printf</span>(<span class="string">"%s"</span>,totalbuffer);   </span><br><span class="line">            <span class="built_in">memset</span>(rBuffer,<span class="number">0</span>,<span class="number">4096</span>);  <span class="comment">// 这是个死循环，一直读取管道中数据，所有要清零缓存</span></span><br><span class="line">            <span class="built_in">memset</span>(totalbuffer,<span class="number">0</span>,<span class="number">4096</span>);</span><br><span class="line">        </span><br><span class="line">        &#125;       </span><br><span class="line">    </span><br><span class="line">    </span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>client端代码：<br><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">"stdafx.h"</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;Winsock2.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="meta-keyword">pragma</span> comment(lib,<span class="meta-string">"ws2_32.lib"</span>)</span></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">(<span class="keyword">int</span> argc, <span class="keyword">char</span>* argv[])</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    </span><br><span class="line">    BYTE minorVer = <span class="number">2</span>; </span><br><span class="line">    BYTE majorVer = <span class="number">2</span>;</span><br><span class="line">    <span class="keyword">char</span> recvBuf[<span class="number">4096</span>]=&#123;<span class="number">0</span>&#125;;</span><br><span class="line">    <span class="keyword">char</span> buffer[<span class="number">4096</span>]=&#123;<span class="number">0</span>&#125;;</span><br><span class="line">    <span class="keyword">char</span> temp[<span class="number">10</span>]=&#123;<span class="number">0</span>&#125;;</span><br><span class="line">    <span class="keyword">int</span> len = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">int</span> total = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">int</span> t =<span class="number">0</span>;</span><br><span class="line">    WSADATA wsaData;</span><br><span class="line">    WORD sockVersion = MAKEWORD(minorVer, majorVer);</span><br><span class="line">    <span class="keyword">if</span>(WSAStartup(sockVersion, &amp;wsaData) != <span class="number">0</span>)</span><br><span class="line">        <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">    <span class="comment">//创建套接字</span></span><br><span class="line">    SOCKET sockClient = socket( AF_INET,SOCK_STREAM, <span class="number">0</span> );</span><br><span class="line">    SOCKADDR_IN addrSrv;</span><br><span class="line">    addrSrv.sin_addr.S_un.S_addr = inet_addr(<span class="string">"172.28.125.137"</span>); <span class="comment">//存server端ip ，</span></span><br><span class="line">    addrSrv.sin_family = AF_INET;</span><br><span class="line">    addrSrv.sin_port = htons(<span class="number">4500</span>);</span><br><span class="line">    <span class="keyword">char</span> x[<span class="number">15</span>]=&#123;<span class="number">0</span>&#125;; <span class="comment">//存放命令比如： cd ， dir ，ls ，pwd </span></span><br><span class="line">    <span class="comment">//向服务器发出连接请求</span></span><br><span class="line">    connect( sockClient, (SOCKADDR*)&amp;addrSrv, <span class="keyword">sizeof</span>(SOCKADDR)); <span class="comment">// 连接</span></span><br><span class="line">    <span class="keyword">while</span>(<span class="number">1</span>)&#123;</span><br><span class="line">        ZeroMemory(recvBuf,<span class="keyword">sizeof</span>(recvBuf));   <span class="comment">// 清零缓存</span></span><br><span class="line">        <span class="keyword">if</span>(<span class="number">0</span>!=<span class="built_in">scanf</span>(<span class="string">"%s"</span>,x))&#123;   <span class="comment">// 等待输入命令</span></span><br><span class="line">          send(sockClient,x,lstrlen(x), <span class="number">0</span> );</span><br><span class="line">                total=recv( sockClient, buffer, <span class="number">4096</span>, <span class="number">0</span> ); <span class="comment">//接收一次，可能收不完哦</span></span><br><span class="line">                lstrcat(recvBuf,buffer); <span class="comment">// 存到总buffer里面</span></span><br><span class="line">                <span class="built_in">memcpy</span>(temp,buffer,<span class="built_in">strstr</span>(buffer,<span class="string">"#"</span>)-buffer);<span class="comment">// 从buffer里面取出来数字部分，就是#前的字符串</span></span><br><span class="line">                t = atoi(temp); <span class="comment">// 转成数字</span></span><br><span class="line">                <span class="built_in">printf</span>(<span class="string">"%d"</span>,t);</span><br><span class="line">                <span class="keyword">while</span>(total&lt;t)&#123; <span class="comment">//如果第一次收到的小于这个数字，继续接收，存到临时buffer</span></span><br><span class="line">                    ZeroMemory(buffer,<span class="keyword">sizeof</span>(buffer));</span><br><span class="line">                    len=recv( sockClient, buffer, <span class="number">4096</span>, <span class="number">0</span> );</span><br><span class="line">                    total=len+total; <span class="comment">// 取到的长度加上第一次的长度</span></span><br><span class="line">                    lstrcat(recvBuf,buffer);<span class="comment">// 这次取得放到总的recvBuf里面</span></span><br><span class="line">                &#125;</span><br><span class="line">            <span class="comment">//  printf("%d\n",atoi(recvBuf));</span></span><br><span class="line">          <span class="built_in">printf</span>(<span class="string">"%s\n"</span>,recvBuf);</span><br><span class="line">          <span class="built_in">printf</span>(<span class="string">"%d\n"</span>,<span class="built_in">strlen</span>(recvBuf));</span><br><span class="line">          total =<span class="number">0</span>; <span class="comment">// 以下清零是为了下次while循环准备，</span></span><br><span class="line">          len = <span class="number">0</span>;</span><br><span class="line">          t =<span class="number">0</span>;</span><br><span class="line">          ZeroMemory(temp,<span class="keyword">sizeof</span>(temp));</span><br><span class="line">          ZeroMemory(buffer,<span class="keyword">sizeof</span>(buffer));</span><br><span class="line">         ZeroMemory(recvBuf,<span class="keyword">sizeof</span>(recvBuf));</span><br><span class="line">        &#125;   <span class="comment">//接受数据</span></span><br><span class="line"></span><br><span class="line"> &#125;</span><br><span class="line"></span><br><span class="line">    closesocket(sockClient);</span><br><span class="line">    WSACleanup();</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>注意：ReadFile是异步或同步模式 ，ReadFileEx只有异步模式</p>

        
        
        <p class="article-more-link">
          
       </p>
    </div>
    <footer class="article-footer clearfix">
<div class="article-catetags">

<div class="article-categories">
  <span></span>
  <a class="article-category-link" href="/categories/windows/">windows</a>
</div>


</div>




<div class="comments-count">
	
</div>

</footer>


    </article>






   
    
    <article class="post-expand post" itemprop="articleBody"> 
        <header class="article-info clearfix">
  <h1 itemprop="name">
    
      <a href="/2017/01/07/linux/apache_wsgi/" title="apache_wsgi支持python脚本" itemprop="url">apache_wsgi支持python脚本</a>
  </h1>
  <p class="article-author">By
       
		<a href="/about" title="wedvefv" target="_blank" itemprop="author">wedvefv</a>
		
  <p class="article-time">
    <time datetime="2017-01-07T06:00:00.000Z" itemprop="datePublished"> Published 2017-01-07</time>
    
  </p>
</header>
    <div class="article-content">
        
        <h1 id="apache支持python脚本"><a href="#apache支持python脚本" class="headerlink" title="apache支持python脚本"></a>apache支持python脚本</h1><p>配置httpd.conf<br>追加：<br><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">LoadModule wsgi_module modules/mod_wsgi.so </span><br><span class="line"></span><br><span class="line">WSGIScriptAlias / C:/xampp/www/py/myweb/myweb/wsgi.py  </span><br><span class="line">WSGIPythonPath C:/xampp/www/py/myweb   #django 项目目录</span><br><span class="line">DocumentRoot "C:/xampp/www/py/myweb/myweb" #具体应用目录</span><br><span class="line">&lt;Directory "C:/xampp/www"&gt;</span><br><span class="line"></span><br><span class="line">Options Indexes FollowSymLinks Includes ExecCGI</span><br><span class="line">AllowOverride All</span><br><span class="line">Require all granted</span><br><span class="line">&lt;/Directory&gt;</span><br></pre></td></tr></table></figure></p>
<p>Options Indexes FollowSymLinks Includes ExecCGI<br>禁止显示Apache目录列表-Indexes FollowSymLinks<br>如何修改目录的配置以禁止显示 Apache 目录列表。<br>减号和去掉indexes是一样的效果 ，都是不存在index时，不要显示目录结构，安全起见。<br>xampp 中的不带减号，依然不可以访问目录。目前不知道原因。可能做了某些安全设置。</p>
<p>AllowOverride参数就是指明Apache服务器是否去找.htacess文件作为配置文件，如果设置为none,那么服务器将忽略.htacess文件，如果设置为All,那么所有在.htaccess文件里有的指令都将被重写。</p>
<p>Require all granted<br>    允许所有请求访问资源</p>

        
        
        <p class="article-more-link">
          
       </p>
    </div>
    <footer class="article-footer clearfix">
<div class="article-catetags">

<div class="article-categories">
  <span></span>
  <a class="article-category-link" href="/categories/linux/">linux</a>
</div>


</div>




<div class="comments-count">
	
</div>

</footer>


    </article>






   
    
    <article class="post-expand post" itemprop="articleBody"> 
        <header class="article-info clearfix">
  <h1 itemprop="name">
    
      <a href="/2016/12/10/linux/nginx_config/" title="nginx  support  php" itemprop="url">nginx  support  php</a>
  </h1>
  <p class="article-author">By
       
		<a href="/about" title="wedvefv" target="_blank" itemprop="author">wedvefv</a>
		
  <p class="article-time">
    <time datetime="2016-12-10T03:30:55.000Z" itemprop="datePublished"> Published 2016-12-10</time>
    
  </p>
</header>
    <div class="article-content">
        
        <h1 id="ubuntu14-04-nginx-php5-fpm"><a href="#ubuntu14-04-nginx-php5-fpm" class="headerlink" title="ubuntu14.04 +nginx+php5-fpm"></a>ubuntu14.04 +nginx+php5-fpm</h1><h2 id="一，安装Nginx"><a href="#一，安装Nginx" class="headerlink" title="一，安装Nginx"></a>一，安装Nginx</h2><p>　　apt-get install nginx</p>
<p>　　1，配置nginx</p>
<p>　　　　nginx所有的配置在 /etc/nginx/nginx.conf中</p>
<p>　　　　nginx.conf配置里面包括了</p>
<p>　　　　　　include /etc/nginx/conf.d/<em>.conf;<br>        　　　include /etc/nginx/sites-enabled/</em>;<br>        这两个配置，所以这里面的配置也是有效的。<br>       错误日志 error_log /var/log/nginx/error.log;</p>
<p>　　这里我们把配置写在 /etc/nginx/sites-available/default中<br>　　修改  root /usr/share/nginx/html;   这是网页的根目录，默认里面有一个index.html页面<br>     index  index.html index.htm修改成index index.php index.html index.htm;<br>     增加  </p>
<p>　　location ~ .php$ {<br>              　　  try_files $uri =404;<br>              　　  fastcgi_pass 127.0.0.1:9000;<br>              　　  fastcgi_index index.php;<br>              　　  include fastcgi_params;<br>      　　  }</p>
<p>　　2，保存文件，使配置生效 /etc/init.d/nginx reload</p>
<p>　　3，启动nginx<br>　　　　/etc/init.d/nginx start</p>
<p>　　4，在 /usr/share/nginx/html下新建index.php<br>　　　　&lt;? php<br>　　　　phpinfo();<br>　　　　?&gt;</p>
<h2 id="二-安装php"><a href="#二-安装php" class="headerlink" title="二 安装php"></a>二 安装php</h2><p>sudo apt-get install php5-fpm</p>
<p>sudo apt-get install php5-gd  # Popular image manipulation library; used extensively by Wordpress and it’s plugins.<br>sudo apt-get install php5-cli   # Makes the php5 command available to the terminal for php5 scripting<br>sudo apt-get install php5-curl    # Allows curl (file downloading tool) to be called from PHP5<br>sudo apt-get install php5-mcrypt   # Provides encryption algorithms to PHP scripts<br>sudo apt-get install php5-mysql   # Allows PHP5 scripts to talk to a MySQL Database<br>sudo apt-get install php5-readline  # Allows PHP5 scripts to use the readline function</p>
<p>查看php5运行进程</p>
<p>ps -waux | grep php5</p>
<p>打开关闭php5进程</p>
<p>sudo service php5-fpm stop<br>sudo service php5-fpm start<br>sudo service php5-fpm restart<br>sudo service php5-fpm status</p>
<p>配置php5监听端口  /etc/php5/fpm/pool.d/<a href="http://www.conf" target="_blank" rel="noopener">www.conf</a></p>
<p>把</p>
<p>listen = /var/run/php5-fpm.sock  改为</p>
<p>listen = 127.0.0.1:9000</p>
<p>重新运行php进程</p>

        
        
        <p class="article-more-link">
          
       </p>
    </div>
    <footer class="article-footer clearfix">
<div class="article-catetags">

<div class="article-categories">
  <span></span>
  <a class="article-category-link" href="/categories/linux/">linux</a>
</div>


</div>




<div class="comments-count">
	
</div>

</footer>


    </article>






   
    
    <article class="post-expand post" itemprop="articleBody"> 
        <header class="article-info clearfix">
  <h1 itemprop="name">
    
      <a href="/2016/10/27/linux/vim-markdown/" title="vim-markdown插件" itemprop="url">vim-markdown插件</a>
  </h1>
  <p class="article-author">By
       
		<a href="/about" title="wedvefv" target="_blank" itemprop="author">wedvefv</a>
		
  <p class="article-time">
    <time datetime="2016-10-27T07:30:00.000Z" itemprop="datePublished"> Published 2016-10-27</time>
    
  </p>
</header>
    <div class="article-content">
        
        <h1 id="首先为了高亮显示markdown文件-，安装vim-markdown插件-vundle管理的"><a href="#首先为了高亮显示markdown文件-，安装vim-markdown插件-vundle管理的" class="headerlink" title="首先为了高亮显示markdown文件 ，安装vim-markdown插件(vundle管理的)"></a>首先为了高亮显示markdown文件 ，安装vim-markdown插件(vundle管理的)</h1><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Plugin 'godlygeek/tabular'</span><br><span class="line">Plugin 'tpope/vim-markdown'</span><br></pre></td></tr></table></figure>
<h1 id="安装时时预览插件-只支持macos-linux-打开markdown文件就会出现浏览器窗口预览"><a href="#安装时时预览插件-只支持macos-linux-打开markdown文件就会出现浏览器窗口预览" class="headerlink" title="安装时时预览插件 只支持macos/linux ,打开markdown文件就会出现浏览器窗口预览"></a>安装时时预览插件 只支持macos/linux ,打开markdown文件就会出现浏览器窗口预览</h1><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">"Plugin 'suan/vim-instant-markdown'</span><br></pre></td></tr></table></figure>
<p>#windows 下有一个python2支持的插件，也能预览</p>
<p>需要python2的支持–python2.7就可以。<br>需要nodejs的支持，自行安装。<br>完成后：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm -g install instant-markdown-d</span><br></pre></td></tr></table></figure>
<p>在vim配置文件中添加:</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Plugin 'suan/vim-instant-markdown'</span><br></pre></td></tr></table></figure>
<p>打开vim 更新安装插件 ：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">:PluginInstall</span><br></pre></td></tr></table></figure>

        
        
        <p class="article-more-link">
          
       </p>
    </div>
    <footer class="article-footer clearfix">
<div class="article-catetags">


  <div class="article-tags">
  
  <span></span> <a href="/tags/vim/">vim</a>
  </div>

</div>




<div class="comments-count">
	
</div>

</footer>


    </article>






   
    
    <article class="post-expand post" itemprop="articleBody"> 
        <header class="article-info clearfix">
  <h1 itemprop="name">
    
      <a href="/2016/10/27/linux/vim-emmet/" title="vim-emmet插件/html/css" itemprop="url">vim-emmet插件/html/css</a>
  </h1>
  <p class="article-author">By
       
		<a href="/about" title="wedvefv" target="_blank" itemprop="author">wedvefv</a>
		
  <p class="article-time">
    <time datetime="2016-10-26T16:00:00.000Z" itemprop="datePublished"> Published 2016-10-27</time>
    
  </p>
</header>
    <div class="article-content">
        
        <h1 id="emmet-vim-插件就是以前的zencoding"><a href="#emmet-vim-插件就是以前的zencoding" class="headerlink" title="emmet-vim 插件就是以前的zencoding"></a>emmet-vim 插件就是以前的zencoding</h1><p>安装 可以git clone ，可以在vim里面安装PluginInstall</p>
<p>来说一下快捷键<br>快捷键一：</p>
<p>输入html：5  按下ctrl+y 松开后在按逗号（英文的哦）<br>立刻展开成如下了<br><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE html&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">"en"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"UTF-8"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span><span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    </span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure></p>
<p>html:xt 就是兼容的html版本</p>
<p>快捷键二：<br>div#page&gt;div.logo+ul#navigation<em>2&gt;li</em>5&gt;a<br>也是ctrl+y，松开后按英文逗号，展开后是：<br><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"page"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"logo"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">ul</span> <span class="attr">id</span>=<span class="string">"navigation"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">""</span>&gt;</span><span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">""</span>&gt;</span><span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">""</span>&gt;</span><span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">""</span>&gt;</span><span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">""</span>&gt;</span><span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">ul</span> <span class="attr">id</span>=<span class="string">"navigation"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">""</span>&gt;</span><span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">""</span>&gt;</span><span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">""</span>&gt;</span><span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">""</span>&gt;</span><span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">""</span>&gt;</span><span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure></p>
<p>可以看出来：</p>
<p>#号是表示id<br>.表示class<br>+ 表示同一级的元素<br>可以用*n 产生多个同名同级的元素<br>>表示要包含的元素<br>#xxx 默认的这个表示默认div元素，且id为xxx</p>

        
        
        <p class="article-more-link">
          
       </p>
    </div>
    <footer class="article-footer clearfix">
<div class="article-catetags">

<div class="article-categories">
  <span></span>
  <a class="article-category-link" href="/categories/vim/">vim</a>
</div>


</div>




<div class="comments-count">
	
</div>

</footer>


    </article>






   
    
    <article class="post-expand post" itemprop="articleBody"> 
        <header class="article-info clearfix">
  <h1 itemprop="name">
    
      <a href="/2016/10/26/linux/vim_luanma/" title="vim 乱码" itemprop="url">vim 乱码</a>
  </h1>
  <p class="article-author">By
       
		<a href="/about" title="wedvefv" target="_blank" itemprop="author">wedvefv</a>
		
  <p class="article-time">
    <time datetime="2016-10-26T10:37:00.000Z" itemprop="datePublished"> Published 2016-10-26</time>
    
  </p>
</header>
    <div class="article-content">
        
        <h1 id="首先-中文os下，我们一般的设置是："><a href="#首先-中文os下，我们一般的设置是：" class="headerlink" title="首先 中文os下，我们一般的设置是："></a>首先 中文os下，我们一般的设置是：</h1><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">set encoding=utf-8                                "设置gvim内部编码</span><br><span class="line">set fileencoding=utf-8                               "设置当前文件编码</span><br><span class="line">set fileencodings=gbk,utf-8,shift_jis,ucs-bom,latin1,gb2312,cp936,cp932    设置支持打开的文件的编码</span><br><span class="line"></span><br><span class="line">set termencoding=utf-8</span><br><span class="line">set guifont=DejaVu\\ Sans\\ Mono\\:h13</span><br></pre></td></tr></table></figure>
<p>上述，set fileencodings设置的文字编码解析顺位，对于中文是可以解析出来的,shift_jis编码的文件，就会出现乱码。除非你把shift_jis设置第一位：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">set fileencodings=shift_jis,gbk,utf-8,ucs-bom,latin1,gb2312,cp936,cp932</span><br></pre></td></tr></table></figure>
<h1 id="对于日文os-，安装gvim后，需要如下设置："><a href="#对于日文os-，安装gvim后，需要如下设置：" class="headerlink" title="对于日文os ，安装gvim后，需要如下设置："></a>对于日文os ，安装gvim后，需要如下设置：</h1><p>由于本地ANSI是cp932 , 所以把cp932 放在第一或者第二的位置，<br>如果放到第三或者后面就会出现shift_jis编码的日文打开后是文本乱码现象。</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">set encoding=utf-8                                    "设置gvim内部编码</span><br><span class="line">set fileencoding=utf-8                               "设置当前文件编码</span><br><span class="line">set fileencodings=CP932,utf-8,gbk,,ucs-bom,latin1,gb2312,cp936 #设置支持打开的文件的编码</span><br><span class="line"></span><br><span class="line">set termencoding=utf-8</span><br><span class="line"></span><br><span class="line">set guifont=DejaVu\ Sans\ Mono\:h13 </span><br><span class="line">set guifontwide=NSimsun\:h14  </span><br><span class="line"><span class="meta">#</span>设置新宋体</span><br></pre></td></tr></table></figure>
<p>由于DejaVu Sans Mono 字体是英文字符字体，无法正确显示宽字体，所以需要特别加入<br><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">set guifontwide=NSimsun\:h14 </span><br><span class="line"><span class="meta">#</span>设置新宋体 ，显示汉字</span><br></pre></td></tr></table></figure></p>
<p>所以大家在自己的sublime 或者vim中设置编辑器字体DejaVu Sans Mono就好像可以显示正确的汉字和英文，其实我们设置的只是英文字符显示的样式。汉字其实是系统本地ANSI编码。</p>
<h2 id="本地ANSI编码"><a href="#本地ANSI编码" class="headerlink" title="本地ANSI编码"></a>本地ANSI编码</h2><p>世界上每种语言对应的windows 系统都有各自的ANSI，互相不兼容。</p>
<p>比如 中文ANSI == GBK(中文) ，gbk是gb2312(简体中文)的扩展，包含繁体，日文片假名。cp936就是gbk<br>    日文ANSI == Windows-31J  就是cp932.<br>shift_jis也是一种日文字符编码,不过，只实现了cp932的部分，所以cp932编码的东东，shift_jis可能乱码。shift_jis编码的，cp932一定正常显示。</p>
<p>这是微软早起应对不同国家一种混合的编码：字母+对应的国家文字,这种字符也是多字节字符。比如：中文ANSI,字母数字是1字节 ,汉字是2字节。两种语言文字有可能在一起就显示乱码。不过微软提供了本地ANSI转换为标准unicode字符的方案，通过代码页转换表技术这一过度方案。</p>
<h2 id="nnicode编码规范"><a href="#nnicode编码规范" class="headerlink" title="nnicode编码规范"></a>nnicode编码规范</h2><p>unicode 是将全世界所有的字符都统一编码的方案(规范))。那么字符a的编码本来是1byte ,现在统一和一个汉字一样长了。那么问题来了，字符串是’\0’字符结尾。世界上的很久以前写的c程序，就没办法用了。所以说unicode应该早点出来。</p>
<p>有了这种全字符集，解决了乱码，却没法用，蛋疼吧，可是utf8这一实现字符保存，传输的方案出现了。因为utf8是可变长的。不同位段，长度不一致。 </p>
<h2 id="utf-8编码"><a href="#utf-8编码" class="headerlink" title="utf-8编码"></a>utf-8编码</h2><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">UCS-2编码(16进制)   UTF-8 字节流(二进制)</span><br><span class="line">0000 - 007F         0xxxxxxx</span><br><span class="line">0080 - 07FF         110xxxxx 10xxxxxx</span><br><span class="line">0800 - FFFF         1110xxxx 10xxxxxx 10xxxxxx </span><br><span class="line"> </span><br><span class="line">例如“汉”字的Unicode编码是6C49。6C49在0800-FFFF之间，所以肯定要用3字节模板了：1110xxxx 10xxxxxx 10xxxxxx。将6C49写成二进制是：0110 110001 001001，用这个比特流依次代替模板中的x，得到：11100110 10110001 10001001，即E6 B1 89。</span><br><span class="line"> </span><br><span class="line">可见UTF-8是变长的，将Unicode编码为00000000-0000007F的字符，用单个字节来表示； 00000080-000007FF的字符用两个字节表示；00000800-0000FFFF的字符用3字节表示。因为目前为止Unicode-16规范没有指定FFFF以上的字符，所以UTF-8最多是使用3个字节来表示一个字符。但理论上来说，UTF-8最多需要用6字节表示一个字符。 </span><br><span class="line"> </span><br><span class="line">UTF-8兼容ASCII。</span><br></pre></td></tr></table></figure>
<p>#utf16编码<br>utf-16 和unicode规范是一致的，所以不兼容ascii。<br>以上信息来源参考： <img src="http://polaris.blog.51cto.com/1146394/377468/" alt="这里的博客"></p>

        
        
        <p class="article-more-link">
          
       </p>
    </div>
    <footer class="article-footer clearfix">
<div class="article-catetags">


</div>




<div class="comments-count">
	
</div>

</footer>


    </article>






   
    
    <article class="post-expand post" itemprop="articleBody"> 
        <header class="article-info clearfix">
  <h1 itemprop="name">
    
      <a href="/2016/10/09/linux/atom/" title="atom编辑器" itemprop="url">atom编辑器</a>
  </h1>
  <p class="article-author">By
       
		<a href="/about" title="wedvefv" target="_blank" itemprop="author">wedvefv</a>
		
  <p class="article-time">
    <time datetime="2016-10-09T07:30:30.000Z" itemprop="datePublished"> Published 2016-10-09</time>
    
  </p>
</header>
    <div class="article-content">
        
        <h1 id="atom-编辑器"><a href="#atom-编辑器" class="headerlink" title="atom 编辑器"></a>atom 编辑器</h1><h2 id="比较："><a href="#比较：" class="headerlink" title="比较："></a>比较：</h2><p>优点：开源，免费，可定制型强，中文支持比sublime做的好，sublime是收费的。<br>缺点：稍微有一点慢，相对于sublime，画面类似sublime，体积也比较大。</p>
<h2 id="发展："><a href="#发展：" class="headerlink" title="发展："></a>发展：</h2><p>  vim基本都是插件扩展， 插件一般是vimscript编写，现在为了可维护性，加入python支持。<br>  sublime：也是插件扩展，主要是json配置，可扩展性没atom好。收费，维护仅由编写者维护。<br>  atom：开源，界面类似sublime，插件脚本由js编写，利于扩展，社区支持强大。有人说atom是编辑器<br>  的集大成者。</p>
<h2 id="windows下安装"><a href="#windows下安装" class="headerlink" title="windows下安装"></a>windows下安装</h2><ol>
<li>需要node.js支持（安装了node.js ，安装npm包管理器（为了解决nodejs代码的部署问题））</li>
<li>安装atom编辑器</li>
<li>打开编辑器，packages-&gt;settings-view-&gt;manager packages ,安装插件即可。</li>
<li>网络被公司设置代理的，需要设置~/.atom/.apmrc 文件如下：<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">strict-ssl=<span class="literal">false</span></span><br><span class="line">http-proxy=http:<span class="comment">//xxxx:xx</span></span><br><span class="line">https-proxy=https:<span class="comment">//xxxx:xx</span></span><br></pre></td></tr></table></figure>
</li>
</ol>
<p>有些时候还是提示 atom.io:433访问地址错误。</p>
<ol start="5">
<li><p>那么可以登录：<a href="https://atom.io/packages/" target="_blank" rel="noopener">https://atom.io/packages/</a> 搜索需要的插件，进入Repo页面。<br>复制 git需要的地址。例如qolor插件地址：<a href="https://github.com/DavidLGoldberg/qolor.git" target="_blank" rel="noopener">https://github.com/DavidLGoldberg/qolor.git</a></p>
</li>
<li><p>进入~/.atom/packages目录下, 打开cmd，执行git clone <a href="https://github.com/DavidLGoldberg/qolor.git" target="_blank" rel="noopener">https://github.com/DavidLGoldberg/qolor.git</a></p>
</li>
<li><p>cd qolor 进入qolor目录，在执行npm install 就会安装 qolor插件了。</p>
</li>
<li><p>npm如果需要设置代理，配置文件是~/.npmrc ，写入：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">registry=http:<span class="comment">//registry.cnpmjs.org/</span></span><br><span class="line">proxy=http:<span class="comment">//xxx:xx</span></span><br></pre></td></tr></table></figure>
</li>
</ol>
<h2 id="测试环境"><a href="#测试环境" class="headerlink" title="测试环境"></a>测试环境</h2><p> windows 8.1</p>
<p> nodejs-4.6.0</p>
<p> python2.7.9</p>
<p> ~表示用户目录。我的是 c:/users/administrator/</p>

        
        
        <p class="article-more-link">
          
       </p>
    </div>
    <footer class="article-footer clearfix">
<div class="article-catetags">

<div class="article-categories">
  <span></span>
  <a class="article-category-link" href="/categories/atom/">atom</a>
</div>


</div>




<div class="comments-count">
	
</div>

</footer>


    </article>






   
    
    <article class="post-expand post" itemprop="articleBody"> 
        <header class="article-info clearfix">
  <h1 itemprop="name">
    
      <a href="/2016/10/06/linux/vim_nerdtree/" title="nerdtree插件" itemprop="url">nerdtree插件</a>
  </h1>
  <p class="article-author">By
       
		<a href="/about" title="wedvefv" target="_blank" itemprop="author">wedvefv</a>
		
  <p class="article-time">
    <time datetime="2016-10-06T12:07:30.000Z" itemprop="datePublished"> Published 2016-10-06</time>
    
  </p>
</header>
    <div class="article-content">
        
        <p>#nerdtree插件，可以在vim左侧显示目录</p>
<h2 id="使用说明"><a href="#使用说明" class="headerlink" title="使用说明"></a>使用说明</h2><p>1、在linux命令行界面，输入vim</p>
<p>2、输入 :NERDTree ，回车</p>
<p>3、进入当前目录的树形界面，通过小键盘上下键，能移动选中的目录或文件</p>
<p>4、目录前面有+或者&gt;号，摁Enter会展开目录，文件前面是-号，摁Enter会在右侧窗口展现该文件的内容，光标自动移到右侧文件窗口。</p>
<p>5、ctr+w+h 光标移到左侧树形目录，ctrl+w+l 光标移到右侧文件显示窗口。多次摁 ctrl+w，光标自动在左右侧窗口切换</p>
<p>6、光标focus左侧树形窗口，摁? 弹出NERDTree的帮助，再次摁？关闭帮助显示</p>
<p>7、输入:q回车，关闭光标所在窗口</p>
<h2 id="进阶用法"><a href="#进阶用法" class="headerlink" title="进阶用法"></a>进阶用法</h2><p>o 打开关闭文件或者目录<br>t 在标签页中打开<br>T 在后台标签页中打开<br>! 执行此文件<br>p 到上层目录<br>P 到根目录<br>K 到第一个节点<br>J 到最后一个节点<br>u 打开上层目录<br>m 显示文件系统菜单（添加、删除、移动操作）<br>? 帮助<br>q 关闭</p>

        
        
        <p class="article-more-link">
          
       </p>
    </div>
    <footer class="article-footer clearfix">
<div class="article-catetags">

<div class="article-categories">
  <span></span>
  <a class="article-category-link" href="/categories/vim/">vim</a>
</div>


  <div class="article-tags">
  
  <span></span> <a href="/tags/vim/">vim</a>
  </div>

</div>




<div class="comments-count">
	
</div>

</footer>


    </article>






   
    
    <article class="post-expand post" itemprop="articleBody"> 
        <header class="article-info clearfix">
  <h1 itemprop="name">
    
      <a href="/2016/10/06/language/html/ajax/" title="ajax简介" itemprop="url">ajax简介</a>
  </h1>
  <p class="article-author">By
       
		<a href="/about" title="wedvefv" target="_blank" itemprop="author">wedvefv</a>
		
  <p class="article-time">
    <time datetime="2016-10-06T12:04:30.000Z" itemprop="datePublished"> Published 2016-10-06</time>
    
  </p>
</header>
    <div class="article-content">
        
        <h1 id="1-ajax-简介"><a href="#1-ajax-简介" class="headerlink" title="1.ajax 简介"></a>1.ajax 简介</h1><p>ajax =  异步javascript+XML<br>AAJAX是基于现有的Internet标准，并且联合使用它们：<br>XMLHttpRequest 对象 (异步的与服务器交换数据)<br>JavaScript/DOM (信息显示/交互)<br>CSS (给数据定义样式)<br>XML (作为转换数据的格式)<br>lamp  AJAX应用程序与浏览器和平台无关的！<br>实现不刷新整个页面，实现页面动态更新的技术。</p>
<p>ajax工作原理：</p>
<p><img src="http://www.ziqiangxuetang.com/static/images/ajax.gif" alt=""></p>
<h1 id="2-ajax实例"><a href="#2-ajax实例" class="headerlink" title="2.ajax实例"></a>2.ajax实例</h1><p> 1.首先建立XMLHttpRequest对象，区分不同的浏览器版本，IE5,IE6不支持直接建立XMLHttpRequest对象，所以： </p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">var</span> xmlhttp;</span><br><span class="line"><span class="keyword">if</span>(<span class="built_in">window</span>.XMLHttpRequest)&#123; <span class="comment">//如果为真，则支持XMLHttpRequest对象</span></span><br><span class="line">    xmlhttp = <span class="keyword">new</span> XMLHttpRequest();</span><br><span class="line">&#125;<span class="keyword">else</span>&#123;</span><br><span class="line">    <span class="comment">//code for IE5,6</span></span><br><span class="line">    xmlhttp = <span class="keyword">new</span> ActiveXObject(<span class="string">"Microsoft.XMLHTTP"</span>;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>2.XMLHttpRequest对象用于和服务器交换数据</p>
<p>open方法用于发送请求，参数1：方法，参数2：url，参数3:异步/同步</p>
<blockquote>
<p>xmlhttp.open(“GET”,”ajax_info.txt”,true)</p>
</blockquote>
<p>send方法也用于请求，不过只支持post请求，参数：string</p>
<blockquote>
<p>xmlhttp.send(string);</p>
</blockquote>
<p>GET和POST的区别：</p>
<ul>
<li>GET更简单，更快，大部分情况都能用。以下情况使用POST：</li>
<li>无法使用缓存文件更新服务器上的文件或数据库。</li>
<li>发送大量数据到服务器。</li>
<li>发送用户输入的未知字符到服务器时。 </li>
</ul>
<h1 id="例子"><a href="#例子" class="headerlink" title="例子"></a>例子</h1><p>get请求：<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">xmlhttp.open(<span class="string">"GET"</span>,<span class="string">"demo_get2.html?fname=Henry&amp;lname=Ford"</span>,<span class="literal">true</span>);</span><br><span class="line">xmlhttp.send();</span><br></pre></td></tr></table></figure></p>
<p>post请求：</p>
<p>如果post表单那样的提交数据，需要添加http头<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">xmlhttp.open(<span class="string">"POST"</span>,<span class="string">"ajax_test.html"</span>,<span class="literal">true</span>);</span><br><span class="line">xmlhttp.setRequestHeader(<span class="string">"Content-type"</span>,<span class="string">"application/x-www-form-urlencoded"</span>);</span><br><span class="line">xmlhttp.send(<span class="string">"fname=Henry&amp;lname=Ford"</span>);</span><br><span class="line"></span><br><span class="line">setRequestHeader方法：</span><br><span class="line">setRequestHeader(header,value)  </span><br><span class="line">向请求添加 HTTP 头。</span><br><span class="line">header: 规定头的名称</span><br><span class="line">value: 规定头的值</span><br></pre></td></tr></table></figure></p>
<h1 id="Async-true"><a href="#Async-true" class="headerlink" title="Async=true"></a>Async=true</h1><ul>
<li>使用XMLRequest.open()方法时，一般在ajax第三个参数必须是true（异步）<br>而且规定请求就绪时执行的函数。也就是定义 XMLHttpRequest.onreadystatechange 事件函数。<br>当请求完成时，触发该函数，类似定时器。</li>
<li>因为web请求也许需要一段时间，所以发送异步请求，等待请求的这段时间可以执行其他代码。请求得到返回时，再执行onreadystatechange中的函数。</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">xmlhttp.onreadystatechange=<span class="function"><span class="keyword">function</span>(<span class="params"></span>) //</span></span><br><span class="line"><span class="function">  </span>&#123;</span><br><span class="line">  <span class="keyword">if</span> (xmlhttp.readyState==<span class="number">4</span> &amp;&amp; xmlhttp.status==<span class="number">200</span>)<span class="comment">//请求正确返回http code 200时</span></span><br><span class="line">  <span class="comment">//执行修改id为mydiv的html元素内容。</span></span><br><span class="line">    &#123;</span><br><span class="line">    <span class="built_in">document</span>.getElementById(<span class="string">"myDiv"</span>).innerHTML=xmlhttp.responseText;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">xmlhttp.open(<span class="string">"GET"</span>,<span class="string">"ajax_info.txt"</span>,<span class="literal">true</span>); <span class="comment">//请求ajax_info.txt文件，</span></span><br><span class="line">xmlhttp.send();</span><br></pre></td></tr></table></figure>
<p>#Async=false </p>
<ul>
<li>不推荐，对于小型的请求也下可以。因为javascript会等待服务器返回后才继续向下执行。如果服务器繁忙，应用程序会挂起或者挂掉。</li>
</ul>
<h1 id="XMLHttpRequest响应"><a href="#XMLHttpRequest响应" class="headerlink" title="XMLHttpRequest响应"></a>XMLHttpRequest响应</h1><p>如果返回200,就可以使用</p>

        
        
        <p class="article-more-link">
          
       </p>
    </div>
    <footer class="article-footer clearfix">
<div class="article-catetags">

<div class="article-categories">
  <span></span>
  <a class="article-category-link" href="/categories/html/">html</a>
</div>


  <div class="article-tags">
  
  <span></span> <a href="/tags/ajax/">ajax</a>
  </div>

</div>




<div class="comments-count">
	
</div>

</footer>


    </article>







  <nav id="page-nav" class="clearfix">
    <a class="extend prev" rel="prev" href="/"><span></span>Prev</a><a class="page-number" href="/">1</a><span class="page-number current">2</span><a class="page-number" href="/page/3/">3</a><a class="extend next" rel="next" href="/page/3/">Next<span></span></a>
  </nav>

</div>
      <div class="openaside"><a class="navbutton" href="#" title="Show Sidebar"></a></div>

<div id="asidepart">
<div class="closeaside"><a class="closebutton" href="#" title="Hide Sidebar"></a></div>
<aside class="clearfix">

  
<div class="github-card">
<p class="asidetitle">Github Card</p>
<div class="github-card" data-github="https://github.com/wedvefv" data-theme="medium"></div>
<script type="text/javascript" src="//cdn.jsdelivr.net/github-cards/latest/widget.js" ></script>
</div>



  
<div class="categorieslist">
	<p class="asidetitle">Categories</p>
		<ul>
		
		  
			<li><a href="/categories/atom/" title="atom">atom<sup>1</sup></a></li>
		  
		
		  
			<li><a href="/categories/c/" title="c">c<sup>1</sup></a></li>
		  
		
		  
			<li><a href="/categories/flask/" title="flask">flask<sup>9</sup></a></li>
		  
		
		  
			<li><a href="/categories/git/" title="git">git<sup>4</sup></a></li>
		  
		
		  
			<li><a href="/categories/html/" title="html">html<sup>2</sup></a></li>
		  
		
		  
			<li><a href="/categories/linux/" title="linux">linux<sup>12</sup></a></li>
		  
		
		  
			<li><a href="/categories/nginx/" title="nginx">nginx<sup>1</sup></a></li>
		  
		
		  
			<li><a href="/categories/python/" title="python">python<sup>3</sup></a></li>
		  
		
		  
			<li><a href="/categories/redis/" title="redis">redis<sup>3</sup></a></li>
		  
		
		  
			<li><a href="/categories/vim/" title="vim">vim<sup>3</sup></a></li>
		  
		
		  
			<li><a href="/categories/windows/" title="windows">windows<sup>5</sup></a></li>
		  
		
		  
			<li><a href="/categories/加密算法/" title="加密算法">加密算法<sup>1</sup></a></li>
		  
		
		  
			<li><a href="/categories/微信支付/" title="微信支付">微信支付<sup>1</sup></a></li>
		  
		
		</ul>
</div>


  
<div class="tagslist">
	<p class="asidetitle">Tags</p>
		<ul class="clearfix">
		
			
				<li><a href="/tags/git/" title="git">git<sup>4</sup></a></li>
			
		
			
				<li><a href="/tags/hexo/" title="hexo">hexo<sup>3</sup></a></li>
			
		
			
				<li><a href="/tags/vim/" title="vim">vim<sup>3</sup></a></li>
			
		
			
				<li><a href="/tags/encrypt/" title="encrypt">encrypt<sup>1</sup></a></li>
			
		
			
				<li><a href="/tags/c/" title="c++">c++<sup>1</sup></a></li>
			
		
			
				<li><a href="/tags/windows/" title="windows">windows<sup>1</sup></a></li>
			
		
			
				<li><a href="/tags/ajax/" title="ajax">ajax<sup>1</sup></a></li>
			
		
			
				<li><a href="/tags/html5/" title="html5">html5<sup>1</sup></a></li>
			
		
		</ul>
</div>


  <div class="linkslist">
  <p class="asidetitle">Links</p>
    <ul>
        
          <li>
            
            	<a href="https://coderq.com" target="_blank" title="一个面向程序员交流分享的新一代社区">码农圈</a>
            
          </li>
        
          <li>
            
            	<a href="https://ejs.bootcss.com/" target="_blank" title="ejs教程">ejs教程</a>
            
          </li>
        
    </ul>
</div>

  


  <div class="rsspart">
	<a href="/atom.xml" target="_blank" title="rss">RSS</a>
</div>

  <div class="weiboshow">
  <p class="asidetitle">Weibo</p>
    <iframe width="100%" height="119" class="share_self"  frameborder="0" scrolling="no" src="http://widget.weibo.com/weiboshow/index.php?language=&width=0&height=119&fansRow=2&ptype=1&speed=0&skin=9&isTitle=1&noborder=1&isWeibo=0&isFans=0&uid=&verifier=&dpc=1"></iframe>
</div>


</aside>
</div>
    </div>
    <footer><div id="footer" >
	
	<div class="line">
		<span></span>
		<div class="author"></div>
	</div>
	
	
	<section class="info">
		<p> Hello ,I&#39;m xiaoying Page in Google. <br/>
			This is my blog,believe it or not.</p>
	</section>
	 
	<div class="social-font" class="clearfix">
		
		<a href="http://weibo.com/5803571716" target="_blank" class="icon-weibo" title="微博"></a>
		
		
		<a href="https://github.com/https://github.com/wedvefv" target="_blank" class="icon-github" title="github"></a>
		
		
		<a href="http://stackoverflow.com/users/10970080" target="_blank" class="icon-stack-overflow" title="stackoverflow"></a>
		
		
		
		
		
		
		
		
	</div>
			
		

		<p class="copyright">
		Powered by <a href="http://hexo.io" target="_blank" title="hexo">hexo</a> and Theme by <a href="https://github.com/wuchong/jacman" target="_blank" title="Jacman">Jacman</a> © 2019 
		
		<a href="/about" target="_blank" title="wedvefv">wedvefv</a>
		
		
		</p>
</div>
</footer>
    <script src="/js/jquery-2.0.3.min.js"></script>
<script src="/js/jquery.imagesloaded.min.js"></script>
<script src="/js/gallery.js"></script>
<script src="/js/jquery.qrcode-0.12.0.min.js"></script>

<script type="text/javascript">
$(document).ready(function(){ 
  $('.navbar').click(function(){
    $('header nav').toggleClass('shownav');
  });
  var myWidth = 0;
  function getSize(){
    if( typeof( window.innerWidth ) == 'number' ) {
      myWidth = window.innerWidth;
    } else if( document.documentElement && document.documentElement.clientWidth) {
      myWidth = document.documentElement.clientWidth;
    };
  };
  var m = $('#main'),
      a = $('#asidepart'),
      c = $('.closeaside'),
      o = $('.openaside');
  c.click(function(){
    a.addClass('fadeOut').css('display', 'none');
    o.css('display', 'block').addClass('fadeIn');
    m.addClass('moveMain');
  });
  o.click(function(){
    o.css('display', 'none').removeClass('beforeFadeIn');
    a.css('display', 'block').removeClass('fadeOut').addClass('fadeIn');      
    m.removeClass('moveMain');
  });
  $(window).scroll(function(){
    o.css("top",Math.max(80,260-$(this).scrollTop()));
  });
  
  $(window).resize(function(){
    getSize(); 
    if (myWidth >= 1024) {
      $('header nav').removeClass('shownav');
    }else{
      m.removeClass('moveMain');
      a.css('display', 'block').removeClass('fadeOut');
      o.css('display', 'none');
        
    }
  });
});
</script>












<link rel="stylesheet" href="/fancybox/jquery.fancybox.css" media="screen" type="text/css">
<script src="/fancybox/jquery.fancybox.pack.js"></script>
<script type="text/javascript">
$(document).ready(function(){ 
  $('.article-content').each(function(i){
    $(this).find('img').each(function(){
      if ($(this).parent().hasClass('fancybox')) return;
      var alt = this.alt;
      if (alt) $(this).after('<span class="caption">' + alt + '</span>');
      $(this).wrap('<a href="' + this.src + '" title="' + alt + '" class="fancybox"></a>');
    });
    $(this).find('.fancybox').each(function(){
      $(this).attr('rel', 'article' + i);
    });
  });
  if($.fancybox){
    $('.fancybox').fancybox();
  }
}); 
</script>



<!-- Analytics Begin -->

<script type="text/javascript">
(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
})(window,document,'script','//www.google-analytics.com/analytics.js','ga');
ga('create', '', '');  
ga('send', 'pageview');
</script>



<script>
var _hmt = _hmt || [];
(function() {
  var hm = document.createElement("script");
  hm.src = "//hm.baidu.com/hm.js?e6d1f421bbc9962127a50488f9ed37d1";
  var s = document.getElementsByTagName("script")[0]; 
  s.parentNode.insertBefore(hm, s);
})();
</script>



<!-- Analytics End -->

<!-- Totop Begin -->

	<div id="totop">
	<a title="Back to Top"><img src="/img/scrollup.png"/></a>
	</div>
	<script src="/js/totop.js"></script>

<!-- Totop End -->

<!-- MathJax Begin -->
<!-- mathjax config similar to math.stackexchange -->


<!-- MathJax End -->

<!-- Tiny_search Begin -->

<!-- Tiny_search End -->

  </body>
 </html>
