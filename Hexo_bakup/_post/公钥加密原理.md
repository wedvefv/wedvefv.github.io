---
layout: post
title: 非对称加密(公钥加密) 
category: 加密
date: 2016-07-21 14:35:58
comments: true
---


<h1><center>公钥加密的工作原理</center></h1>
## 对称加密：

```c
* 加密密钥和解密密钥是一样的。
```
<br> 

## 非对称加密：

```c
*	(也叫公钥加密)
* 两个密钥在加密和解密中配合使用，密钥对具有特殊的互补关系，密钥对在数学上存在特殊关系。
```
<br>

## 邮件的电子签名过程：


![](http://technet.microsoft.com/zh-cn/library/Aa998077.35451fb8-5e11-4d67-ba6e-e5d4da6febca%28zh-cn,TechNet.10%29.gif)

```c
* 捕获邮件正文-->计算邮件哈希值-->检索发件人私钥-->用发件人私钥加密哈希值-->附加到邮件底部(明文签名)/与原始邮件组合成二进制附件(不透明签名)-->发送mail
* --私钥只有发件人才唯一拥有，公钥仅仅与一个私钥关联，所以可以用公钥唯一识别一个私钥。
```
<br> 

### 验证邮件签名的过程：


![](http://technet.microsoft.com/zh-cn/library/Aa998077.d1b14a27-5cfb-4df2-89f7-990219378716%28zh-cn,TechNet.10%29.gif)
```c
* 接收邮件-->检索加密的哈希值-->检索邮件正文-->用正文计算邮件哈希值-->检索发件人的公钥-->用发件人公钥解密签名(加密的哈希值)-->和计算的哈希值对比-->验证签名邮件
* --文件内容不变，计算的哈希值就不会变。
* --私钥加密的东西，需要对应的公钥解密。
* --如果哈希值一致，说明公钥对应的私钥是对的，私钥只有发件人知道，所以确定发件人属实。

```

<br> 

## 邮件内容的加密


```c
* 对称密钥加密的话，需要"密钥协商"，必须协商出一个双方都知道的密钥。
* 非对称密钥加密的话，没有协商过程，因为一个公钥，可以很多人拥有，私钥是只有一个人有。
* 由于非对称(公钥加密)密钥加密使用密钥对，加密和解密是一个昂贵的计算过程，速度慢。所以这么做呗......
```
<br>

### send加密mail内容


![](http://technet.microsoft.com/zh-cn/library/Aa998077.21058391-2d70-42f9-bf25-8ead79705b27%28zh-cn,TechNet.10%29.gif)
```c
* -- 1.找到邮件正文-->2.检索收件人公钥-->3.生成一次性的会话密钥(这个是对称密钥)-->4.用会话密钥加密正文-->5.用收件人公钥加密会话密钥，并附到邮件-->6.发送邮件
```
<br> 

### recv解密mail内容

![](http://technet.microsoft.com/zh-cn/library/Aa998077.50f0afca-e520-46b5-8e12-6e295dfe86d9%28zh-cn,TechNet.10%29.gif)
```c
* -- 1.接收邮件-->2.检索加密邮件正文和会话密钥->3.检索收件人私钥解密会话密钥->4.用解密的会话密钥解密正文->5.解密邮件返回给收件人

```
<br>

### 同时使用签名和邮件内容加密

![tu](http://technet.microsoft.com/zh-cn/library/Aa998077.e81cca9b-c780-49d9-a3f9-69cc3c442183%28zh-cn,TechNet.10%29.gif)

<br>

### 同时使用签名和邮件内容加密后的解密


![](http://technet.microsoft.com/zh-cn/library/Aa998077.97705e57-0a94-4197-99c3-40bb58a9eaa0%28zh-cn,TechNet.10%29.gif)
<br> 

### 功能和所需的密钥表

![](http://technet.microsoft.com/zh-cn/library/Aa998077.ef4e76b6-4799-45a9-90f8-ec7af508152a%28zh-cn,TechNet.10%29.gif)




