---
layout: post
title: flask 第2章(模板)
category: flask
date: 2019-01-28 22:22:00

---

# 模板

## 1. jinja2模板引擎

* 创建模板目录
* mkdir templates
* cd templates
* vim index.html
* 输入 <h1\> hello world! </h1\>

* vim user.html
* 输入 <h1\> hello {{name}} </h1\>


## 2. 变量

### 普通变量
* 占位符变量可以是python中的类型
```py
 {{ mydict['key'] }}
 {{ mylist[3] }}
 {{ mylist[value] }}
 {{ obje.func() }}
 ```
 
### 过滤器  

* hello {{ name|capitalize}}  把name转成搜字符大写。

|过滤器名字|说明|
|-|-|
|safe|渲染时不转义|
|capitalize|首字母大写|
|lower|转成小写|
|upper|转成大写|
|title|每个单词首字母转大写|
|trim|去掉首尾空格|
|striptags|渲染前把其中的html标签都删除掉|

* safe 常用在现实html代码本身，不然标签会被引擎默认转义(这样也是为了安全考虑)。
* 不要再不可信的值上使用safe过滤器，比如表单输入。

## 3. 控制结构

### if结构

```py
  { % if user %}
    hello {{user}}
  {% else %}
    hello stranger
  {% endif %}
```


### for循环结构

```py
<ul>
{ % for x in list %}
  <li>{{ x }}</li>
{ %endfor% }
</ul>
```

### 宏。 类似python的函数

```py
* 定义宏
 {% macro render_comment(x) %}
  <li>{{ x }}</li>
 {% endmacro%}

* 使用

<ul>
 {% for x in list %>
    {{ render_comment(x) }}
 { %endfor%}
 </ul>

* 可以将宏放入单独的文件，一边重复使用，使用时导入即可。
{ % import 'macros.html' as macros % }
<ul>
   {% for x in list %>
      {{ macros.render_comment(x) }}
   { %endfor%}
</ul>

* 需要重复使用的模板也可单独放一个文件中
用到的地方 {% include 'common.html'%} 包含即可。

```


